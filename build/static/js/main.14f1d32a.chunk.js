(this["webpackJsonpnext-meal"]=this["webpackJsonpnext-meal"]||[]).push([[0],{125:function(e,t,a){},134:function(e,t,a){},196:function(e,t,a){e.exports=a(355)},216:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},248:function(e,t,a){},249:function(e,t,a){},250:function(e,t,a){},251:function(e,t,a){},252:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},353:function(e,t,a){},354:function(e,t,a){},355:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(55),c=a.n(i),l=a(17),o=a(21),s=a(8),m=a(22),d=a(159),u=a.n(d),p=a(66),h=a(369),f=a(364),b=(a(125),a(15)),_=a(16),E=a(11),g=a(19),v=a(18),N=a(5),y=a.n(N),w=a(363),k=a(365),O=a(95),S=a(362),j=a(368),C=a(366),x=(a(367),a(205));a(215),x.apps.length||x.initializeApp({apiKey:"AIzaSyC_xPAyKYsvuIuT6mceI_8gow7H3cSo3BI",authDomain:"dotch-food.firebaseapp.com",projectId:"dotch-food"});var F=function(e){return{type:"FETCH_STORE_LIST_BY_TAG",payload:x.firestore().collection("stores").where("tags.".concat(e),"==",!0).get()}},T=function(){return{type:"FETCH_RECOMMEND_STORE_LIST",payload:x.firestore().collection("stores").where("recommend","==",!0).limit(4).get()}},I=function(){return{type:"FETCH_HOT_STORE_LIST",payload:x.firestore().collection("stores").where("hot","==",!0).limit(4).get()}},L=function(e){var t=e.userID,a=e.store;return{type:"ADD_FAV_LIST",payload:x.firestore().collection("favlist").doc(t).update({list:x.firestore.FieldValue.arrayUnion(a)})}},D=function(e){return{type:"FETCH_STORE_INFO",payload:x.firestore().collection("stores").where("id","==",e).limit(1).get()}},H=function(e){return{type:"FETCH_STORE_COMMENTS",payload:x.firestore().collection("comments").where("id","==",e).limit(5).get()}},M=function(e){return{type:"RESTORE_USER_INFO",payload:e}},R=["\u65e5\u5f0f\u6599\u7406","\u65e9\u5348\u9910","\u6c99\u62c9","\u71d2\u70e4","\u6f22\u5821","\u8f15\u98df","\u725b\u6392","\u751f\u9b5a\u7247","\u95dc\u6771\u716e","\u5e73\u50f9"],A=["\u4eca\u5929\u5403\u98ef\uff0c\u8a72\u5403\u4ec0\u9ebc\u597d\u5462\uff1f\u53ea\u8981\u8f38\u5165\u7f8e\u98df\u6b32\u671b\uff0c\u7acb\u523b\u7d66\u4f60\u6700\u771f\u5be6\u3001\u73fe\u5834\u3001\u751f\u6d3b\u5316\u7684\u8a55\u50f9\uff0c\u627e\u9910\u5ef3\u518d\u4e5f\u4e0d\u7169\u60f1\uff0c\u5c31\u8b93\u5403\u4ec0\u9ebc\uff0c\u3069\u3063\u3061\u5e6b\u4f60\u6c7a\u5b9a\u5403\u4ec0\u9ebc\uff01","\u4f86\u81ea\u540d\u53e4\u5c4b\u7684\u65e9\u9910\uff0cKomeda coffee \u9b06\u8edf\u5976\u6cb9\u5410\u53f8\uff0c\u5357\u4eac\u677e\u6c5f\u7ad9","\u8207\u5c0f\u718a\u7dad\u5c3c\u7684\u5348\u8336\u7d04\u6703\uff01\u65b0\u5bbf\u300c\u8702\u871c\u5496\u5561\u300d\u9650\u5b9a\u767b\u5834","\u4e03\u5915\u5c31\u662f\u8981\u6d6a\u6f2b\u4e00\u4e0b\uff01\u5168\u53f0\u7cbe\u9078 10 \u5bb6\u7279\u8272\u6d6a\u6f2b\u666f\u89c0\u9910\u5ef3"],V=[{id:"bd3060eb-a952-4a5e-a4ec-b2cb91544786",className:"rice-bowl",title:"\u4e2d\u5f0f",tag:"\u4e2d\u5f0f\u6599\u7406",show:!0},{id:"183bde18-13b3-420e-bdfe-f33d36c26d22",className:"burger",title:"\u7f8e\u5f0f",tag:"\u7f8e\u5f0f\u6599\u7406",show:!0},{id:"4df916eb-6b84-4cd9-a3ba-aa80b89cb9f8",className:"sushi",title:"\u65e5\u5f0f",tag:"\u65e5\u5f0f\u6599\u7406",show:!0},{id:"4830b325-3623-4a4e-88d5-91f879baa5e8",className:"dim-sum",title:"\u6e2f\u5f0f",tag:"\u6e2f\u5f0f\u6599\u7406",show:!0},{id:"10283f0d-5e51-4503-8898-bef0d0e67dce",className:"sashimi",title:"\u97d3\u5f0f",tag:"\u97d3\u5f0f\u6599\u7406",show:!0},{id:"007f4c15-4782-4560-b7c9-f5c91f4ae4bf",className:"thai-food",title:"\u6cf0\u5f0f",tag:"\u6cf0\u5f0f\u6599\u7406",show:!0},{id:"15eedeed-0786-405d-bb8a-8e06596f6afe",className:"spaguetti",title:"\u7fa9\u5f0f",tag:"\u7fa9\u5f0f\u6599\u7406",show:!0},{id:"2421f4e0-c479-4c0b-84f9-998b44a7aadd",className:"croissant",title:"\u6cd5\u5f0f",tag:"\u6cd5\u5f0f\u6599\u7406",show:!0},{id:"a25b7aa8-87b6-4ad3-8cc7-8529190ab006",className:"curry",title:"\u5370\u5ea6",tag:"\u5370\u5ea6\u6599\u7406",show:!0},{id:"bc41ee12-8b72-4bf4-9961-3919c302301b",className:"merlion",title:"\u661f\u99ac\u5357\u6d0b",tag:"\u661f\u99ac\u5357\u6d0b\u6599\u7406",show:!0},{id:"086f0866-1ed4-4d5d-836f-4b42ebaec24d",className:"wok",title:"\u7570\u570b",tag:"\u7570\u570b\u6599\u7406",show:!0},{id:"76363331-4912-453c-ab98-4aba16dde936",className:"buffet",title:"\u5403\u5230\u98fd",tag:"\u5403\u5230\u98fd",show:!0},{id:"5cdce9c4-c9b5-425f-b62d-bdc903b56abd",className:"grill",title:"\u71d2\u70e4",tag:"\u71d2\u70e4",show:!0},{id:"290a27f2-e3b6-4638-9857-7efbd06dece2",className:"pot",title:"\u706b\u934b",tag:"\u706b\u934b",show:!0},{id:"e64fe1f3-f627-4041-89e4-1e9ade3ada43",className:"tray",title:"\u9435\u677f\u71d2",tag:"\u9435\u677f\u71d2",show:!0},{id:"1e6d0d1b-e152-434a-a954-8cf205ab1c19",className:"breakfast",title:"\u8907\u5408/\u7c21\u9910",tag:"\u8907\u5408\u9910\u98f2",show:!0},{id:"6892b0ab-b7be-41d1-b84d-e1998089c70b",className:"self-service",title:"\u81ea\u52a9\u9910",tag:"\u81ea\u52a9\u9910",show:!0},{id:"e3561ce3-928a-45c4-8759-6f007230ab58",className:"lunch-box",title:"\u4fbf\u7576",tag:"\u4fbf\u7576"},{id:"31725bce-b40c-11e8-96f8-529269fb1459",className:"popcorn",title:"\u901f\u98df",tag:"\u901f\u98df",show:!0},{id:"9011f22f-449c-459f-bd1b-6f2924adb39c",className:"sandwich",title:"\u65e9\u5348\u9910",tag:"\u65e9\u5348\u9910",show:!0},{id:"72815cd4-768a-4e6f-a520-a8fb002d04c2",className:"salad-bowl",title:"\u8f15\u98df",tag:"\u8f15\u98df",show:!0},{id:"9d2df9cc-c5e5-4eaa-8123-b7c0ee14073d",className:"piece-of-cake",title:"\u751c\u9ede",tag:"\u751c\u9ede",show:!0},{id:"84c0e0de-3e65-4ab9-bb9a-2f7433ea4a3c",className:"cake-with-strawberry",title:"\u4e0b\u5348\u8336",tag:"\u4e0b\u5348\u8336",show:!0},{id:"e34686f1-88b3-4219-b5fa-62d49a3a368e",className:"beer",title:"\u9152\u5427",tag:"\u9152\u5427",show:!0},{id:"01f558aa-ca2d-4ca2-add7-7ca945dba6e9",className:"noodles",title:"\u5c0f\u5403",tag:"\u5c0f\u5403",show:!0},{id:"f3865f75-f4ed-431d-b130-b890b3be444f",className:"lettuce",title:"\u7d20\u98df",tag:"\u7d20\u98df",show:!0},{id:"ac890d9c-b409-11e8-96f8-529269fb1459",className:"instant-noodles",title:"\u8abf\u7406\u5305",tag:"\u8abf\u7406\u5305",show:!0},{id:"c5a95896-c009-4af3-83df-aee304b84ea8",className:"network",title:"\u7db2\u5496",tag:"\u7db2\u5496",show:!0},{id:"bea91673-c6b4-4ac3-87b4-b1b9258d9a3e",className:"doll",title:"\u4e3b\u984c\u7279\u8272",tag:"\u4e3b\u984c\u7279\u8272",show:!0},{id:"a3af7f04-5183-4e47-9905-8705469506d7",className:"baby-boy",title:"\u89aa\u5b50\u53cb\u5584",tag:"\u89aa\u5b50\u53cb\u5584",show:!0},{id:"e45de147-ab0a-4c26-a077-b23f03c3e51f",className:"pets",title:"\u5bf5\u7269\u53cb\u5584",tag:"\u5bf5\u7269\u53cb\u5584",show:!0},{id:"ac891954-b409-11e8-96f8-529269fb1459",className:"baking",title:"DIY",tag:"DIY",show:!0},{id:"a96feaff-4711-469e-a20f-5fef8f0d9d96",className:"food-truck",title:"\u5c0f\u8ca9\u9910\u8eca",tag:"\u5c0f\u8ca9\u9910\u8eca",show:!0},{id:"4479113d-2297-45b8-9657-a35089d59504",className:"orange-juice",title:"\u5496\u5561\u8336\u98f2",tag:"\u5496\u5561\u8336\u98f2",show:!0},{id:"11ee2741-7a51-4907-93a4-e38a85bcbad6",className:"toast",title:"\u70d8\u7119\u7cd5\u9ede",tag:"\u70d8\u7119\u7cd5\u9ede",show:!0},{id:"97c2e5f3-4397-4d47-b80f-88e62521c7f6",className:"dinner-table",title:"\u5176\u4ed6",tag:"\u5176\u4ed6",show:!0}],P=[{id:"1",className:"sushi",title:"\u58fd\u53f8",tag:"\u58fd\u53f8",show:!0},{id:"2",className:"sandwich",title:"\u65e9\u5348\u9910",tag:"\u65e9\u5348\u9910",show:!0},{id:"3",className:"grill",title:"\u71d2\u70e4",tag:"\u71d2\u70e4",show:!0},{id:"4",className:"burger",title:"\u6f22\u5821",tag:"\u6f22\u5821",show:!0},{id:"5",className:"salad-bowl",title:"\u8f15\u98df",tag:"\u8f15\u98df",show:!0},{id:"6",className:"steak",title:"\u725b\u6392",tag:"\u725b\u6392",show:!0},{id:"7",className:"piece-of-cake",title:"\u751c\u9ede",tag:"\u751c\u9ede",show:!0},{id:"8",className:"dim-sum",title:"\u6e2f\u5f0f\u5c0f\u9ede",tag:"\u6e2f\u5f0f\u6599\u7406",show:!0},{id:"9",className:"low-price",title:"\u5e73\u50f9",tag:"\u5e73\u50f9",show:!0},{id:"10",className:"beer-bottles",title:"\u5c45\u9152\u5c4b",tag:"\u5c45\u9152\u5c4b",show:!0},{id:"11",className:"coffee",title:"\u5496\u5561",tag:"\u5496\u5561",show:!0},{id:"12",className:"thai-food",title:"\u6cf0\u570b\u83dc",tag:"\u6cf0\u5f0f\u6599\u7406",show:!0},{id:"13",className:"tea-cup",title:"\u8336",tag:"\u8336",show:!0},{id:"14",className:"crab",title:"\u6d77\u9bae",tag:"\u6d77\u9bae",show:!0},{id:"15",className:"fried-chicken",title:"\u70b8\u96de",tag:"\u70b8\u96de",show:!0},{id:"16",className:"rice-bowl",title:"\u5bb6\u5e38\u83dc",tag:"\u5bb6\u5e38\u83dc",show:!0},{id:"17",className:"lettuce",title:"\u7d20\u98df",tag:"\u7d20\u98df",show:!0},{id:"18",className:"skewer",title:"\u4e32\u71d2",tag:"\u4e32\u71d2",show:!0},{id:"19",className:"baking",title:"DIY",tag:"DIY",show:!0},{id:"20",className:"spaguetti",title:"\u7fa9\u5927\u5229\u9eb5",tag:"\u7fa9\u5927\u5229\u9eb5",show:!0},{id:"21",className:"pot",title:"\u706b\u934b",tag:"\u706b\u934b",show:!0},{id:"22",className:"doll",title:"\u4e3b\u984c\u7279\u8272",tag:"\u4e3b\u984c\u7279\u8272",show:!0},{id:"23",className:"food-truck",title:"\u5c0f\u8ca9\u9910\u8eca",tag:"\u5c0f\u8ca9\u9910\u8eca",show:!0},{id:"24",className:"champagne",title:"\u6176\u8cc0",tag:"\u6176\u8cc0",show:!1},{id:"25",className:"takeaway",title:"\u5916\u5e36",tag:"\u5916\u5e36",show:!0},{id:"26",className:"baby-boy",title:"\u89aa\u5b50\u53cb\u5584",tag:"\u89aa\u5b50\u53cb\u5584",show:!0},{id:"27",className:"pets",title:"\u5bf5\u7269\u53cb\u5584",tag:"\u5bf5\u7269\u53cb\u5584",show:!0},{id:"38",className:"parking-yellow",title:"\u505c\u8eca\u4f4d",tag:"\u505c\u8eca\u4f4d",show:!0},{id:"29",className:"pokecoin",title:"\u5bf6\u53ef\u5922",tag:"\u5bf6\u53ef\u5922",show:!0},{id:"30",className:"train",title:"\u6377\u904b\u6cbf\u7dda",tag:"\u6377\u904b\u6cbf\u7dda",show:!0},{id:"31",className:"superheroe-black",title:"\u6f2b\u756b\u96dc\u8a8c",tag:"\u6f2b\u756b\u96dc\u8a8c",show:!0},{id:"32",className:"social-media",title:"\u62cd\u7167\u6253\u5361",tag:"\u62cd\u7167\u6253\u5361",show:!0},{id:"33",className:"sofa",title:"\u6c99\u767c",tag:"\u6c99\u767c",show:!0},{id:"996",className:"movie",title:"\u684c\u908a\u670d\u52d9",tag:"\u684c\u908a\u670d\u52d9",show:!0},{id:"997",className:"review",title:"\u7279\u5225\u63a8\u85a6",tag:"\u7279\u5225\u63a8\u85a6",show:!0},{id:"998",className:"baker",title:"\u7121\u83dc\u55ae",tag:"\u7121\u83dc\u55ae",show:!0},{id:"999",className:"delivery",title:"\u5916\u9001",tag:"\u5916\u9001",show:!0}],G=[{id:"209b9815-911e-42c0-a501-6757d8c63c62",title:"\u4e00\u500b\u4eba\u8981\u5403\u4ec0\u9ebc\u597d\uff1f",link:"/tag?keyword=\u4e00\u500b\u4eba",show:!0},{id:"96997512-6b97-4a5e-95cd-c7d588354a0a",title:"\u53f0\u5317\u6700\u9069\u5408\u7d04\u6703\u7684\u9910\u5ef3",link:"/tag?keyword=\u60c5\u4eba\u7bc0\u5927\u9910",show:!0},{id:"696cedc7-c4ea-4671-9c53-28897f3acb62",title:"\u600e\u9ebc\u5403\u624d\u6703\u7626\uff1f\u79d8\u8a23\u5728\u9019\u88e1",link:"/tag?keyword=\u7626\u8eab",show:!0},{id:"f7062e18-79f6-45b8-bb2b-9b883e347b15",title:"\u905b\u5c0f\u5b69\u7684\u597d\u53bb\u8655\uff01",link:"/tag?keyword=\u89aa\u5b50\u53cb\u5584",show:!0},{id:"69a62d6f-d62e-41be-8bf5-089895c41dba",title:"\u4e0d\u9650\u6642\uff01\u548c\u670b\u53cb\u6b61\u805a\u66a2\u804a\u4e0d\u8a2d\u9650",link:"/tag?keyword=\u4e0d\u9650\u6642",show:!0},{id:"f70efa1f-df85-4f2b-83ee-24aeb3948396",title:"\u6700\u9069\u5408\u5de5\u4f5c\u7684\u5496\u5561\u5ef3\u6e05\u55ae",link:"/tag?keyword=\u5de5\u4f5c",show:!0},{id:"e73418b4-b0f7-43bb-8381-355f2269900e",title:"\u5bf6\u53ef\u5922\u88dc\u7d66\u7ad9\uff01\u4f11\u606f\uff0c\u5145\u96fb\u548c Wifi",link:"/tag?keyword=\u5bf6\u53ef\u5922",show:!0},{id:"bbd01354-88a2-4930-849e-66bf75c2d978",title:"\u8d85\u503c\u6703\u54e1\u5361\u5927\u96c6\u5408\uff0c\u8fa6\u4e86\u7d55\u5c0d\u4e0d\u5f8c\u6094",link:"/tag?keyword=\u6703\u54e1\u5361",show:!0},{id:"0b664a52-fb2c-42e2-8e73-13e592ef6091",title:"\u7121\u9650\u6f2b\u756b\u770b\u5230\u98fd",link:"/tag?keyword=\u6f2b\u756b\u96dc\u8a8c",show:!0},{id:"d91b94a8-7ff7-4377-b49b-1d9db14b51b4",title:"\u4e00\u8d77\u770b\u8db3\u7403\u8cfd\uff0c\u8d85\u5927\u96fb\u8996\u87a2\u5e55\u3001\u5564\u9152",link:"/tag?keyword=\u904b\u52d5\u9152\u5427",show:!0},{id:"056bfcdb-4b5c-4845-89b2-abfb0159cb2b",title:"\u4f60\u4e5f\u53ef\u4ee5\u7576\u7db2\u7d05\uff01\u4f86\u9019\u88e1\u62cd\u7167\u6253\u5361",link:"/tag?keyword=\u62cd\u7167\u6253\u5361",show:!0}],U="\u5403\u4ec0\u9ebc\uff0c\u3069\u3063\u3061",B="\u7dda\u4e0a\u8a02\u4f4d",Y="\u96fb\u8a71\u8a02\u4f4d",q="\u5c0e\u822a",K="\u5730\u5740",J="\u96fb\u8a71",z="\u71df\u696d\u6642\u9593",X="\u50f9\u683c",W="\u7db2\u7ad9",Q="\u52a0\u5165\u6211\u7684\u6700\u611b",Z="\u79fb\u9664\u6211\u7684\u6700\u611b",$="24 \u5c0f\u6642\u71df\u696d",ee="\u6377\u904b\u6cbf\u7dda",te="\u4e0d\u9650\u6642",ae="\u9644\u8fd1\u6709\u505c\u8eca\u4f4d",ne="\u63d0\u4f9b\u63d2\u5ea7",re="\u53ef\u5916\u5e36",ie="\u514d\u8cbb Wifi",ce="\u53ea\u63a5\u53d7\u73fe\u91d1",le="\u5ba2\u88fd\u5316\u670d\u52d9",oe="\u89aa\u5b50\u53cb\u5584",se="\u5bf5\u7269\u53cb\u5584",me="\u6709\u5bf6\u53ef\u5922\u88dc\u7d66\u7ad9",de=[{id:"fav",title:"\u6211\u7684\u6700\u611b",icon:"heart",link:"/fav",modalType:null,needLogin:!0},{id:"register",title:"\u8a3b\u518a",icon:"star",link:"#",modalType:null,needLogin:!1},{id:"login",title:"\u767b\u5165",icon:"star",link:"#",modalType:"login",needLogin:!1},{id:"logout",title:"\u767b\u51fa",icon:"star",link:"/",modalType:"/",needLogin:!0}],ue=(a(216),{LOGIN:"login"}),pe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={account:null,keyword:"",modalType:null,password:null},n.onSeachHandler=n.onSeachHandler.bind(Object(E.a)(n)),n.onSearchInputChange=n.onSearchInputChange.bind(Object(E.a)(n)),n.renderLoginModal=n.renderLoginModal.bind(Object(E.a)(n)),n.renderMenuItems=n.renderMenuItems.bind(Object(E.a)(n)),n.renderMenuList=n.renderMenuList.bind(Object(E.a)(n)),n.renderSearchBox=n.renderSearchBox.bind(Object(E.a)(n)),n}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.cookies.cookies;a&&a.dotchfooduser?t(M(JSON.parse(a.dotchfooduser))):t({type:"LOGOUT"})}},{key:"onSearchInputChange",value:function(e){this.setState({keyword:e})}},{key:"onAccountInputChange",value:function(e){this.setState({account:e})}},{key:"onPasswordInputChange",value:function(e){this.setState({password:e})}},{key:"onSeachHandler",value:function(e){if("Enter"===e.key){var t=e.target.value;m.b.push("/tag?keyword=".concat(t))}}},{key:"renderMenuList",value:function(){return r.a.createElement("div",{className:"header__menu-list"},this.renderMenuItems())}},{key:"renderMenuItems",value:function(){var e=this,t=this.props.user.isLogin;return y.a.map(de,(function(a){return t===a.needLogin&&r.a.createElement("div",{key:a.title,className:"header__menu__item"},r.a.createElement(s.b,{href:a.link},r.a.createElement("a",{title:a.title,className:"header__menu__item__link",onClick:function(){a.modalType===ue.LOGIN?e.setState({modalType:ue.LOGIN}):"logout"===a.id&&e.props.dispatch({type:"LOGOUT"})}},r.a.createElement("span",{title:a.title,className:"header__menu__item__icon icon-".concat(a.icon)}),r.a.createElement("span",{className:"header__menu__item__title"},a.title))))}))}},{key:"renderSearchBox",value:function(){var e=this,t=this.state.keyword;return r.a.createElement("div",{className:"header__searchbox"},r.a.createElement("input",{className:"header__search-input",placeholder:"\u6709\u4ec0\u9ebc\u597d\u5403\u7684\uff1f","aria-label":"\u6709\u4ec0\u9ebc\u597d\u5403\u7684\uff1f",value:t,onChange:function(t){return e.onSearchInputChange(t.target.value)},onKeyPress:function(t){return e.onSeachHandler(t)}}),r.a.createElement("button",{type:"button",className:"header__searchbox__cancel",onClick:function(){return e.onSearchInputChange("")}},"x"))}},{key:"renderLoginModal",value:function(){var e=this,t=this.props.dispatch,a=this.state.modalType;return r.a.createElement(k.a,{isOpen:a===ue.LOGIN,onClose:function(){e.setState({modalType:null})}},r.a.createElement(k.g,null),r.a.createElement(k.d,null,r.a.createElement(k.f,null,"Log On"),r.a.createElement(k.c,null),r.a.createElement(k.b,null,r.a.createElement(O.a,null,r.a.createElement(S.a,{htmlFor:"account"},"Account"),r.a.createElement(j.a,{type:"text",id:"account",placeholder:"Account",onChange:function(t){return e.onAccountInputChange(t.target.value)}})),r.a.createElement(O.a,null,r.a.createElement(S.a,{htmlFor:"password"},"Password"),r.a.createElement(j.a,{type:"password",id:"password",placeholder:"Password",onChange:function(t){return e.onPasswordInputChange(t.target.value)}}))),r.a.createElement(k.e,null,r.a.createElement(C.a,{variant:"ghost",onClick:function(){var a=e.state,n=a.account,r=a.password;t(function(e,t,a){return{type:"LOGIN",payload:x.firestore().collection("users").where("id","==",e).get().then((function(e){var n=[];return y.a.forEach(e.docs,(function(e){n.push(e.data())})),n[0].password===t?(a(),{isLogin:!0,userInfo:n[0]}):{isLogin:!1,userInfo:null}})).catch((function(e){console.error("Error occurred: ",e)}))}}(n,r,(function(){e.setState({modalType:null})})))}},"Log On"))))}},{key:"render",value:function(){var e=this.state.modalType;return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header__nav"},r.a.createElement(s.b,{href:"/"},r.a.createElement("a",{title:U},r.a.createElement("i",{className:"header__logo icon-logo","aria-label":U}))),r.a.createElement(s.b,{href:"/"},r.a.createElement("a",{className:"header__title",title:U},U))),this.renderSearchBox(),this.renderMenuList(),this.renderLoginModal(),e===ue.LOGON&&this.renderLoginModal())}}]),a}(n.Component),he=Object(w.a)(Object(l.b)((function(e){return e}))(pe)),fe=a(164),be=a.n(fe),_e=(a(242),function(e){var t=e.tags;return r.a.createElement("div",{className:"tag-list"},y.a.map(t,(function(e){return r.a.createElement("div",{key:e.id,className:"tag-list__item"},r.a.createElement(s.b,{href:"/tag?keyword=".concat(e.tag)},r.a.createElement("a",{title:e.title,className:"tag-list__item__link"},r.a.createElement("span",{title:e.title,className:"tag-list__item__icon icon-".concat(e.className)}),r.a.createElement("span",{className:"tag-list__item__title"},e.title))))})))}),Ee=(a(243),function(e){var t=e.categories,a=e.topics;return r.a.createElement("div",{className:"app-container footer"},r.a.createElement("div",{className:"footer__column footer__column-2x"},r.a.createElement("h2",{className:"footer__heading"},"\u5206\u985e"),r.a.createElement(_e,{tags:t})),r.a.createElement("div",{className:"footer__column"},r.a.createElement("h2",{className:"footer__heading"},"\u71b1\u9580\u8a0e\u8ad6"),r.a.createElement("div",{className:"align-row footer__hot-topic"},r.a.createElement("ul",{className:"unordered-list-circle"},y.a.map(a,(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(s.b,{href:e.link},r.a.createElement("a",{title:e.title},e.title)))}))))),r.a.createElement("div",{className:"footer__column"},r.a.createElement("h2",{className:"footer__heading"},"\u95dc\u65bc\u300c\u5403\u4ec0\u9ebc\uff0c\u3069\u3063\u3061\u300d"),r.a.createElement("ul",{className:"unordered-list-circle"},r.a.createElement("li",null,r.a.createElement("a",{title:"\u4ec0\u9ebc\u662f\u300c\u5403\u4ec0\u9ebc\uff0c\u3069\u3063\u3061\u300d\uff1f",href:"https://cythilya.github.io/2015/02/02/dotchi/",target:"_blank",rel:"noopener noreferrer"},"\u4ec0\u9ebc\u662f\u300c\u5403\u4ec0\u9ebc\uff0c\u3069\u3063\u3061\u300d\uff1f")),r.a.createElement("li",null,r.a.createElement("a",{title:"\u806f\u7d61\u6211\u5011",href:"mailto:cythilya@gmail.com"},"\u806f\u7d61\u6211\u5011")))))}),ge=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(_.a)(a,[{key:"render",value:function(){var e="index"===this.props.id?"app-container--reverse":"";return r.a.createElement("div",null,r.a.createElement(he,null),r.a.createElement("div",{className:"newsticker"},r.a.createElement(be.a,{news:A})),r.a.createElement("div",{className:"app-container ".concat(e)},r.a.createElement("div",{className:"app-main-content"},this.props.children),r.a.createElement("div",{className:"app-menu"},r.a.createElement("div",{className:"panel"},r.a.createElement("h1",{className:"panel__main-heading mb-1x"},"\u71b1\u9580\u4e3b\u984c"),r.a.createElement(_e,{tags:P})))),r.a.createElement(Ee,{categories:V,topics:G}))}}]),a}(n.Component),ve=Object(l.b)((function(e){return e}))(ge),Ne=a(63),ye=a.n(Ne),we=(a(248),function(e){var t=e.store;return r.a.createElement("div",{className:"store-control-buttons"},t.booking.phone&&r.a.createElement(s.b,{href:"tel:".concat(t.booking.phone)},r.a.createElement("a",{title:Y,className:"button",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{className:"store-control-buttons__icon icon-phone-white",title:Y}),r.a.createElement("span",{className:"button-with-line-breaks-text"},Y))),t.booking.online&&r.a.createElement(s.b,{href:"".concat(t.booking.online)},r.a.createElement("a",{title:B,className:"button",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{className:"store-control-buttons__icon icon-online-booking",title:B}),r.a.createElement("span",{className:"button-with-line-breaks-text"},B))),r.a.createElement(s.b,{href:"https://www.google.com.tw/maps/search/".concat(t.location.address)},r.a.createElement("a",{title:q,className:"button",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",{className:"store-control-buttons__icon icon-pin-on-map",title:q}),r.a.createElement("span",{className:"button-with-line-breaks-text short-word"},q))))}),ke=(a(249),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={isChangeFavStatus:!1,isFavorite:!1},n.handleAddFavList=n.handleAddFavList.bind(Object(E.a)(n)),n}return Object(_.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this;t.isFavorite!==this.state.isFavorite&&this.setState({isChangeFavStatus:!0},(function(){setTimeout((function(){a.setState({isChangeFavStatus:!1})}),300)}))}},{key:"handleAddFavList",value:function(){var e=this.props,t=e.addFavList,a=e.store,n=e.userID,r=this.state.isFavorite;t({store:a,userID:n}),this.setState({isFavorite:!r})}},{key:"render",value:function(){var e=this.props.store,t=this.state,a=t.isFavorite,n=t.isChangeFavStatus,i=a?Z:Q,c=a?"icon-heart-full":"icon-heart-empty",l=n?"clicked":"";return r.a.createElement("div",{className:"card",key:e.id},r.a.createElement("a",{title:i,className:"card__fav-button button--transparent ".concat(l),target:"_blank",rel:"noopener noreferrer",onClick:this.handleAddFavList},r.a.createElement("span",{className:"card__fav-icon ".concat(c),title:i})),r.a.createElement(ye.a,{offsetVertical:100},r.a.createElement("figure",null,r.a.createElement("picture",null,r.a.createElement("source",{media:"(min-width: 1080px)",srcSet:"".concat(e.image[6].url," 1x, ").concat(e.image[8].url," 2x"),type:"image/webp"}),r.a.createElement("source",{media:"(min-width: 1080px)",srcSet:"".concat(e.image[2].url,"} 1x, ").concat(e.image[4].url," 2x"),type:"image/jpeg"}),r.a.createElement("source",{media:"(min-width: 840px)",srcSet:"".concat(e.image[5].url,"} 1x, ").concat(e.image[6].url," 2x"),type:"image/webp"}),r.a.createElement("source",{media:"(min-width: 840px)",srcSet:"".concat(e.image[1].url,"} 1x, ").concat(e.image[2].url," 2x"),type:"image/jpeg"}),r.a.createElement("source",{media:"(min-width: 768px)",srcSet:"".concat(e.image[6].url," 1x, ").concat(e.image[8].url," 2x"),type:"image/webp"}),r.a.createElement("source",{media:"(min-width: 768px)",srcSet:"".concat(e.image[2].url," 1x, ").concat(e.image[4].url," 2x"),type:"image/jpeg"}),r.a.createElement("source",{media:"(min-width: 568px)",srcSet:"".concat(e.image[6].url," 1x, ").concat(e.image[8].url," 2x"),type:"image/webp"}),r.a.createElement("source",{media:"(min-width: 568px)",srcSet:"".concat(e.image[2].url," 1x, ").concat(e.image[4].url," 2x"),type:"image/jpeg"}),r.a.createElement("source",{media:"(min-width: 375px)",srcSet:e.image[7].url,type:"image/webp"}),r.a.createElement("source",{media:"(min-width: 375px)",srcSet:e.image[3].url,type:"image/jpeg"}),r.a.createElement("source",{media:"(min-width: 320px)",srcSet:"".concat(e.image[6].url," 1x, ").concat(e.image[8].url," 2x"),type:"image/webp"}),r.a.createElement("source",{media:"(min-width: 320px)",srcSet:"".concat(e.image[2].url," 1x, ").concat(e.image[4].url," 2x"),type:"image/jpeg"}),r.a.createElement("source",{media:"(man-width: 319px)",srcSet:"".concat(e.image[5].url," 1x, ").concat(e.image[6].url," 2x"),type:"image/webp"}),r.a.createElement("source",{media:"(man-width: 319px)",srcSet:"".concat(e.image[1].url," 1x, ").concat(e.image[2].url," 2x"),type:"image/jpeg"}),r.a.createElement("img",{className:"card__image",src:e.image[4].url,alt:e.name})),r.a.createElement("figcaption",{className:"hide"},e.name))),r.a.createElement("div",{className:"card__container"},r.a.createElement("h2",{className:"card__title"},r.a.createElement(s.b,{href:"/store?id=".concat(e.id)},r.a.createElement("a",{title:e.name},e.name))),r.a.createElement("div",{className:"card__tag-list"},e.tags.map((function(e){return r.a.createElement("div",{key:e,className:"card__tag-item"},r.a.createElement(s.b,{href:"/tag?keyword=".concat(e)},r.a.createElement("a",{title:e,className:"card__tag-link"},e)))}))),r.a.createElement(we,{store:e})))}}]),a}(n.Component)),Oe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).renderCards=n.renderCards.bind(Object(E.a)(n)),n}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"FETCH_NEARBY_STORE_LIST",payload:x.firestore().collection("stores").where("nearby","==",!0).limit(4).get()}),e(T()),e(I())}},{key:"renderCards",value:function(e){return y.a.map(e,(function(e){return r.a.createElement(ke,{key:e.id,store:e})}))}},{key:"render",value:function(){var e=this.props.filteredStores,t=e.hotStoresData,a=e.nearbyStoresData,n=e.recommendStoresData;return r.a.createElement(ve,{title:"\u9996\u9801",id:"index"},r.a.createElement("div",{className:"panel"},r.a.createElement("h1",{className:"panel__main-heading"},"\u96e2\u6211\u6700\u8fd1",r.a.createElement("span",{className:"panel__heading-deco icon-pin-map"})),r.a.createElement(s.b,{href:"/nearby"},r.a.createElement("a",{className:"panel__view-more",title:"\u770b\u66f4\u591a-\u96e2\u6211\u6700\u8fd1"},"\u770b\u66f4\u591a")),r.a.createElement("div",{className:"card-list"},this.renderCards(a))),r.a.createElement("div",{className:"panel"},r.a.createElement("h1",{className:"panel__main-heading"},"\u731c\u4f60\u60f3\u5403"),r.a.createElement(s.b,{href:"/nearby"},r.a.createElement("a",{className:"panel__view-more",title:"\u770b\u66f4\u591a-\u731c\u4f60\u60f3\u5403"},"\u770b\u66f4\u591a")),r.a.createElement("div",{className:"card-list"},this.renderCards(n))),r.a.createElement("div",{className:"panel"},r.a.createElement("h1",{className:"panel__main-heading"},"\u71b1\u9580\u63a8\u85a6",r.a.createElement("span",{className:"panel__heading-deco icon-star"})),r.a.createElement(s.b,{href:"/nearby"},r.a.createElement("a",{className:"panel__view-more",title:"\u770b\u66f4\u591a-\u71b1\u9580\u63a8\u85a6"},"\u770b\u66f4\u591a")),r.a.createElement("div",{className:"card-list"},this.renderCards(t))))}}]),a}(n.Component);Oe.defaultProps={hotStoresData:[],nearbyStoresData:[],recommendStoresData:[]};var Se=Object(l.b)((function(e){return e}))(Oe),je=(a(250),function(e){var t=e.features,a=t.cashOnly,n=t.customService,i=t.family,c=t.mrt,l=t.noTimeLimit,o=t.pokemon,s=t.parking,m=t.pet,d=t.socket,u=t.takeout,p=t.twentyfourhr,h=t.wifi;return r.a.createElement("div",{className:"feature-list"},p&&r.a.createElement("span",{title:$,className:"feature-list__icon icon-24-hours"}),c&&r.a.createElement("span",{title:ee,className:"feature-list__icon icon-train"}),l&&r.a.createElement("span",{title:te,className:"feature-list__text"},te),s&&r.a.createElement("span",{title:ae,className:"feature-list__icon icon-parking-yellow"}),d&&r.a.createElement("span",{title:ne,className:"feature-list__icon icon-plug"}),u&&r.a.createElement("span",{title:re,className:"feature-list__icon icon-takeaway"}),h&&r.a.createElement("span",{title:ie,className:"feature-list__icon icon-wifi"}),a&&r.a.createElement("span",{title:ce,className:"feature-list__icon icon-cash"}),n&&r.a.createElement("span",{title:le,className:"feature-list__icon icon-pc-mechanic"}),i&&r.a.createElement("span",{title:oe,className:"feature-list__icon icon-baby-boy"}),m&&r.a.createElement("span",{title:se,className:"feature-list__icon icon-pets"}),o&&r.a.createElement("span",{title:me,className:"feature-list__icon icon-pokecoin"}))});je.defaultProps={features:{}};var Ce=je,xe=function(e){var t=e.nav,a=e.activeIndex,n=e.onClickTabNavHandler,i=t.id===a?"selected":"";return r.a.createElement("div",{key:t.title,className:"tabs__nav__item ".concat(i),title:t.title,onClick:function(){return n(t.id)},onKeyDown:function(){return n(t.id)}},t.title)},Fe=function(e){var t=e.panel,a=e.activeIndex,n=t.id===a?"selected":"";return r.a.createElement("div",{key:t.title,id:t.hash,className:"tabs__panel__item ".concat(n)},t.content)},Te=(a(251),function(e){var t=e.tabs,a=e.activeIndex,n=e.onClickTabNavHandler;return r.a.createElement("div",{className:"tabs"},r.a.createElement("div",{className:"tabs__nav"},y.a.map(t,(function(e){var t={id:e.id,title:e.title,hash:e.hash};return r.a.createElement(xe,{key:e.title,nav:t,activeIndex:a,onClickTabNavHandler:n})}))),r.a.createElement("div",{className:"tab__panel"},y.a.map(t,(function(e){var t={id:e.id,title:e.title,hash:e.hash,content:e.content};return r.a.createElement(Fe,{key:e.title,activeIndex:a,panel:t})}))))}),Ie=a(58),Le=(a(252),function(e){var t=e.comments[0].comments||[];return r.a.createElement("div",{className:"store-comments"},y.a.map(t,(function(e){var t=e.user,a=e.content;return r.a.createElement("div",{key:e.id,className:"store-comments__item"},r.a.createElement("div",{className:"store-comments__item__user-image icon-kitty"}),r.a.createElement("div",{className:"store-comments__item__detail"},r.a.createElement("div",{className:"store-comments__item__user-name"},t),r.a.createElement("div",{className:"store-comments__item__content"},a)))})))});Le.defaultProps={comments:[]};var De=Le,He=a(155),Me=a(156),Re=(a(253),a(254),a(134),a(255),function(e){return e?void 0:"\u5fc5\u586b"}),Ae=function(e){var t=e.input,a=e.placeholder,n=e.autocomplete,i=e.meta,c=i.touched,l=i.error,o=i.warning;return r.a.createElement("div",null,r.a.createElement("input",Object.assign({},t,{type:"text",className:"form__input-text",placeholder:a,autocomplete:n})),c&&(l&&r.a.createElement("span",{className:"form__error"},l)||o&&r.a.createElement("span",{className:"form__warning"},o)))},Ve=function(e){var t=e.input,a=(e.label,e.type,e.meta),n=a.touched,i=a.error,c=e.children;return r.a.createElement("div",null,r.a.createElement("select",Object.assign({},t,{className:"form__select"}),c),n&&i&&r.a.createElement("span",{className:"form__error"},i))},Pe=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;Object(b.a)(this,a),n=t.call(this,e);e.id,e.storeid,e.closeForm,e.isFormValid,e.resetFormStatus,e.handleSubmit,e.pristine,e.reset,e.submitting,e.handleSubmitFail;return n}return Object(_.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.storeid,n=e.closeForm,i=e.isFormValid,c=e.resetFormStatus,l=e.handleSubmit,o=e.pristine,s=e.reset,m=e.submitting,d=e.handleSubmitFail,u=2!==i?"":"hide",p=i?"hide":"",h=2===i?"":"hide";return r.a.createElement("div",{className:"comment-form"},r.a.createElement("div",{className:u},r.a.createElement("div",{className:"comment-form__main-title"},r.a.createElement("h1",{className:"form__main-heading mb-2x"},"\u6211\u8981\u7d66\u8a55\u50f9\uff01"),r.a.createElement("i",{className:"comment-form__close",onClick:n,onKeyDown:n},"X")),r.a.createElement("form",{className:"form form-store-info",onSubmit:l,onSubmitFail:d},r.a.createElement("div",{className:"form__block"},r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{className:"form__label",htmlFor:"user"},"\u66b1\u7a31"),r.a.createElement("div",{className:"form__field"},r.a.createElement(He.a,{type:"text",component:Ae,id:"user",name:"user",placeholder:"\u8acb\u554f\u60a8\u7684\u5927\u540d\u662f\uff1f",className:"form__input-text",validate:[Re]}))),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{className:"form__label",htmlFor:"rating"},"\u8a55\u7b49"),r.a.createElement("div",{className:"form__field"},r.a.createElement(He.a,{component:Ve,id:"rating",name:"rating",validate:[Re]},r.a.createElement("option",{value:"",disabled:!0},"\u8acb\u9078\u64c7\u8a55\u7b49"),r.a.createElement("option",{value:"5"},"5 \u661f\u7d1a\uff01\u771f\u662f\u592a\u68d2\u4e86 (\u6492\u82b1)"),r.a.createElement("option",{value:"4"},"4 \u9846\u661f\uff01\u5f88\u597d\u7684\u9ad4\u9a57\uff01"),r.a.createElement("option",{value:"3"},"3 \u9846\u661f\uff0c\u9084\u53ef\u4ee5\u645f\uff01"),r.a.createElement("option",{value:"2"},"2 \u9846\u661f\uff0c\u666e\u666e\u901a\u901a XD"),r.a.createElement("option",{value:"1"},"1 \u9846\u661f\uff0c\u6709\u5f85\u52a0\u5f37")))),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{className:"form__label",htmlFor:"meal"},"\u9910\u5225"),r.a.createElement("div",{className:"form__field"},r.a.createElement(He.a,{component:Ve,id:"meal",name:"meal",validate:[Re]},r.a.createElement("option",{value:"",disabled:!0},"\u8acb\u9078\u64c7\u9910\u5225"),r.a.createElement("option",{value:"breakfast"},"\u65e9\u9910"),r.a.createElement("option",{value:"brunch"},"\u65e9\u5348\u9910"),r.a.createElement("option",{value:"lunch"},"\u5348\u9910"),r.a.createElement("option",{value:"afternoontea"},"\u4e0b\u5348\u8336"),r.a.createElement("option",{value:"dinner"},"\u665a\u9910"),r.a.createElement("option",{value:"midnightsnack"},"\u5bb5\u591c"),r.a.createElement("option",{value:"other"},"\u5176\u4ed6")))),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{className:"form__label",htmlFor:"date"},"\u7528\u9910\u65e5\u671f"),r.a.createElement("div",{className:"form__field"},r.a.createElement(He.a,{type:"text",component:"input",id:"date",name:"date",placeholder:"yyyy/mm/dd",className:"form__input-text",validate:[Re]}))),r.a.createElement("div",{className:"form__group"},r.a.createElement("label",{htmlFor:"content",className:"form__label"},"\u5167\u5bb9"),r.a.createElement("div",{className:"form__field"},r.a.createElement(He.a,{type:"text",component:Ae,id:"content",name:"content",placeholder:"\u60f3\u8aaa\u4ec0\u9ebc\u5462\uff1f",className:"form__input-text",validate:[Re]}))),r.a.createElement(He.a,{type:"text",component:"input",name:"docid",value:t,className:"hide"}),r.a.createElement(He.a,{type:"text",component:"input",name:"id",value:a,className:"hide"})),r.a.createElement("div",{className:"form__button-group"},r.a.createElement("button",{type:"submit",disabled:o||m,className:"button"},"\u63d0\u4ea4")))),r.a.createElement("div",{className:"".concat(p)},r.a.createElement("div",{className:"alert alert--danger"},r.a.createElement("div",{className:"alert--icon"},"\u2717"),r.a.createElement("div",{className:"alert--content"},"\u55da\u55da\u51fa\u932f\u4e86\uff0c\u8acb\u91cd\u65b0\u518d\u8a66\u4e00\u6b21"))),r.a.createElement("div",{className:h},r.a.createElement("div",{className:"alert alert--success"},r.a.createElement("div",{className:"alert--icon"},"\u2713"),r.a.createElement("div",{className:"alert--content"},"\u611f\u8b1d\u60a8\u7684\u610f\u898b\uff01\u8cc7\u6599\u5be9\u6838\u9700\u7d04\u4e00\u9031\uff0c\u8acb\u8010\u5fc3\u7b49\u5019\u3002\u5be9\u6838\u901a\u904e\u5c31\u6703\u51fa\u73fe\u5728\u9801\u9762\u4e0a\uff01")),r.a.createElement("div",{className:"form__button-group"},r.a.createElement("button",{type:"button",onClick:function(){s(),c(1),n(1)},className:"button--default"},"\u9ede\u6211\u95dc\u9589"))))}}]),a}(n.Component);Pe.defaultProps={};var Ge=Object(Me.a)({form:"commentData"})(Pe),Ue=(a(353),function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={isOpenReviewForm:!1,isFormValid:1},n.renderStoreComments=n.renderStoreComments.bind(Object(E.a)(n)),n.enableCommentForm=n.enableCommentForm.bind(Object(E.a)(n)),n.handleFormSubmit=n.handleFormSubmit.bind(Object(E.a)(n)),n.handleSubmitFail=n.handleSubmitFail.bind(Object(E.a)(n)),n.resetFormStatus=n.resetFormStatus.bind(Object(E.a)(n)),n.closeStoreCommentForm=n.closeStoreCommentForm.bind(Object(E.a)(n)),n}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.comments,n=e.storeid;t(Object(Ie.a)("commentData","docid",a.id)),t(Object(Ie.a)("commentData","id",n))}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.dispatch,n=t.comments,r=t.storeid;n.id!==e.comments.id&&a(Object(Ie.a)("commentData","docid",n.id)),r!==e.storeid&&a(Object(Ie.a)("commentData","id",r))}},{key:"enableCommentForm",value:function(){this.setState({isOpenReviewForm:!0})}},{key:"handleFormSubmit",value:function(e){var t=this,a=this.props,n=a.dispatch;a.comments.id?n(function(e){var t=e.docid,a={user:e.user,rating:e.rating,meal:e.meal,date:e.date,content:e.content};return{type:"SAVE_STORE_COMMENT",payload:x.firestore().collection("comments").doc(t).update({comments:x.firestore.FieldValue.arrayUnion(a)})}}(e)).then((function(){t.setState({isFormValid:2})})):n(function(e){var t=e.id,a=e.user,n=e.rating,r=e.meal,i=e.date,c=e.content;return{type:"INSERT_STORE_COMMENT",payload:x.firestore().collection("comments").add({id:t,comments:[{user:a,rating:n,meal:r,date:i,content:c}]})}}(e)).then((function(){t.setState({isFormValid:2})}))}},{key:"handleSubmitFail",value:function(){this.setState({isFormValid:0})}},{key:"resetFormStatus",value:function(e){this.setState({isFormValid:e})}},{key:"closeStoreCommentForm",value:function(){this.setState({isOpenReviewForm:!1,isFormValid:1})}},{key:"renderStoreComments",value:function(e,t){var a=this.state,n=a.isOpenReviewForm,i=a.isFormValid,c=e.commentList||[],l=c.length>0?r.a.createElement(De,{comments:c}):r.a.createElement("div",{className:"store-info__no-comments"},"\u66ab\u7121\u8a55\u50f9!");return r.a.createElement("div",null,n&&r.a.createElement(Ge,{id:e.id,storeid:t,isFormValid:i,onSubmit:this.handleFormSubmit,onSubmitFail:this.handleSubmitFail,closeForm:this.closeStoreCommentForm,resetFormStatus:this.resetFormStatus}),l)}},{key:"render",value:function(){var e=this.props,t=e.comments,a=e.storeid;return r.a.createElement("div",{className:"store-review"},r.a.createElement("div",{className:"store-review__control"},r.a.createElement("div",null,"\u60f3\u8aaa\u4ec0\u9ebc\u55ce\uff1f",r.a.createElement("span",{className:"store-review__feedback",onClick:this.enableCommentForm,onKeyDown:this.enableCommentForm},"\u9ede\u9019\u88e1"),"\u7d66\u8a55\u50f9\uff01")),this.renderStoreComments(t,a))}}]),a}(n.Component));Ue.defaultProps={comments:{}};var Be=Object(l.b)((function(e){return e}))(Ue),Ye=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).state={index:0},n.onClickHandler=n.onClickHandler.bind(Object(E.a)(n)),n.renderStoreInfo=n.renderStoreInfo.bind(Object(E.a)(n)),n.renderStoreComments=n.renderStoreComments.bind(Object(E.a)(n)),n}return Object(_.a)(a,[{key:"onClickHandler",value:function(e){this.setState({index:e})}},{key:"renderStoreInfo",value:function(e){return r.a.createElement("div",null,r.a.createElement("ul",{className:"store-info__detail"},r.a.createElement("li",{className:"store-info__detail__item"},r.a.createElement("i",{className:"store-info__detail__item__icon icon-pin-map",title:K}),r.a.createElement("a",{title:q,href:"https://www.google.com.tw/maps/search/".concat(e.location.address),target:"_blank",rel:"noopener noreferrer"},e.location.address)),r.a.createElement("li",{className:"store-info__detail__item"},r.a.createElement("i",{className:"store-info__detail__item__icon icon-phone",title:J}),r.a.createElement("a",{title:J,href:"".concat(e.phone),target:"_blank",rel:"noopener noreferrer"},e.phone)),r.a.createElement("li",{className:"store-info__detail__item"},r.a.createElement("i",{className:"store-info__detail__item__icon icon-clock-circular-outline",title:z}),e.openingHour.start,"~",e.openingHour.end),r.a.createElement("li",{className:"store-info__detail__item"},r.a.createElement("i",{className:"store-info__detail__item__icon icon-dollar",title:X}),e.price.lowest,"~",e.price.highest),r.a.createElement("li",{className:"store-info__detail__item"},r.a.createElement("i",{className:"store-info__detail__item__icon icon-global",title:W}),r.a.createElement("a",{title:e.name,href:"".concat(e.sns.website),target:"_blank",rel:"noopener noreferrer"},e.name))),e.features&&r.a.createElement(Ce,{features:e.features}),r.a.createElement("div",{className:"store-info__tag-list"},e.tags.map((function(e){return r.a.createElement("div",{key:e,className:"store-info__tag-item"},r.a.createElement(s.b,{href:"/tag?keyword=".concat(e)},r.a.createElement("a",{className:"store-info__tag-link",title:e},e)))}))))}},{key:"renderStoreComments",value:function(e,t){return r.a.createElement(Be,{comments:e,storeid:t})}},{key:"render",value:function(){var e=this.props,t=e.store,a=e.comments,n=this.state.index,i=[{id:0,title:"\u8cc7\u8a0a",hash:"info",content:this.renderStoreInfo(t)},{id:1,title:"\u8a55\u50f9",hash:"comment",content:this.renderStoreComments(a,t.id)}];return r.a.createElement("div",null,r.a.createElement("div",{key:t.id,className:"store-info"},r.a.createElement("div",{className:"store-info__image",style:{background:"#e8e8e8",width:"175px",height:"175px"}},r.a.createElement(ye.a,{offsetVertical:100,height:175},r.a.createElement("figure",null,r.a.createElement("picture",null,r.a.createElement("source",{media:"all",srcSet:"".concat(t.image[5].url," 1x, ").concat(t.image[6].url," 2x"),type:"image/webp"}),r.a.createElement("source",{media:"all",srcSet:"".concat(t.image[1].url," 1x, ").concat(t.image[2].url," 2x"),type:"image/jpeg"}),r.a.createElement("img",{src:t.image[1].url,alt:t.name})),r.a.createElement("figcaption",{className:"hide"},t.name)))),r.a.createElement("div",{className:"store-info__container"},r.a.createElement("div",{className:"store-info__content"},t.description,r.a.createElement(we,{store:t})),r.a.createElement(Te,{tabs:i,activeIndex:n,onClickTabNavHandler:this.onClickHandler}))))}}]),a}(n.Component);Ye.defaultProps={comments:{}};var qe=Ye,Ke=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(_.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(T())}},{key:"render",value:function(){var e=this.props.tags,t=this.props.filteredStores.recommendStoresData;return r.a.createElement("div",null,r.a.createElement("h1",{className:"panel__main-heading"},"\u627e\u4e0d\u5230\uff01"),r.a.createElement(s.b,{href:"/"},r.a.createElement("a",{title:"\u56de\u300c\u5403\u4ec0\u9ebc\u300d\u9996\u9801"},"\u56de\u9996\u9801")),"\u6216\u770b\u71b1\u9580\u95dc\u9375\u5b57",r.a.createElement(s.b,{href:"/tag?keyword=".concat(e[0])},r.a.createElement("a",{title:e[0]},e[0])),"\u3001",r.a.createElement(s.b,{href:"/tag?keyword=".concat(e[1])},r.a.createElement("a",{title:e[1]},e[1])),"\u3001",r.a.createElement(s.b,{href:"/tag?keyword=".concat(e[2])},r.a.createElement("a",{title:e[2]},e[2])),r.a.createElement("hr",null),r.a.createElement("div",{className:"mt-2x"},r.a.createElement("h1",{className:"panel__main-heading"},"\u731c\u4f60\u60f3\u5403"),r.a.createElement("div",{className:"card-list"},function(e){return y.a.map(e,(function(e){return r.a.createElement(ke,{key:e.id,store:e,ref:(void 0).card})}))}(t))))}}]),a}(n.Component);Ke.defaultProps={filteredStores:null};var Je=Object(l.b)((function(e){return e}))(Ke),ze=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.router.query.id;t(D(a)),t(H(a))}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.dispatch,n=t.router.query.id;n!==e.router.query.id&&(a(D(n)),a(H(n)))}},{key:"render",value:function(){var e=this.props,t=e.store,a=e.storeComments,n=y.a.isEmpty(t),i=y.a.isObject(t)&&y.a.isEmpty(t);return r.a.createElement(ve,{title:"\u5546\u5e97\u55ae\u9801",id:"store"},r.a.createElement("div",{className:"panel"},!n&&r.a.createElement("div",null,r.a.createElement("h1",{className:"panel__main-heading mb-2x"},r.a.createElement(s.b,{href:"/store/?id=".concat(t.id)},r.a.createElement("a",{title:t.name},t.name))),r.a.createElement(qe,{store:t,comments:a})),n&&r.a.createElement(Je,{tags:R.slice(0,3)}),i&&r.a.createElement("div",{className:"icon-loading store-item__loading"})))}}]),a}(n.Component);ze.defaultProps={storeComments:{}};var Xe=Object(m.f)(Object(l.b)((function(e){return e}))(ze)),We=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).renderCardList=n.renderCardList.bind(Object(E.a)(n)),n.renderCards=n.renderCards.bind(Object(E.a)(n)),n.renderNoDataHint=n.renderNoDataHint.bind(Object(E.a)(n)),n}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e,t=this.props,a=t.dispatch,n=t.cookies.cookies;if(n&&n.dotchfooduser){var r=JSON.parse(n.dotchfooduser);r&&r.id&&a((e=r.id,{type:"FETCH_FAV_LIST",payload:x.firestore().collection("favlist").where("id","==",e).limit(20).get()})),a(M(r))}}},{key:"renderCards",value:function(e){var t=this.props,a=t.dispatch,n=t.user.userInfo;return y.a.map(e,(function(e){return r.a.createElement(ke,{addFavList:function(e){a(L(e))},key:e.id,store:e,userID:n.id})}))}},{key:"renderCardList",value:function(){var e=this.props.favList;return r.a.createElement("div",{className:"card-list"},this.renderCards(e))}},{key:"renderNoDataHint",value:function(){return r.a.createElement("div",null,"\u9019\u88e1\u662f\u7a7a\u7684 XDDD")}},{key:"render",value:function(){var e=this.props,t=e.favList,a=e.user.isLogin,n=!y.a.size(t);return r.a.createElement("div",null,n&&this.renderNoDataHint(),!n&&a&&this.renderCardList(t))}}]),a}(n.Component);We.defaultProps={favList:null};var Qe=Object(w.a)(Object(l.b)((function(e){return e}))(We)),Ze=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).renderCards=n.renderCards.bind(Object(E.a)(n)),n}return Object(_.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(I())}},{key:"renderCards",value:function(e){var t=this.props,a=t.dispatch,n=t.user.userInfo;return y.a.map(e,(function(e){return r.a.createElement(ke,{addFavList:function(e){a(L(e))},key:e.id,store:e,userID:n.id})}))}},{key:"render",value:function(){var e=this.props.filteredStores.hotStoresData;return r.a.createElement(ve,{title:"\u9996\u9801",id:"index"},r.a.createElement("div",{className:"panel"},r.a.createElement("h1",{className:"panel__main-heading"},"\u6211\u7684\u6700\u611b"),r.a.createElement(Qe,null)),r.a.createElement("div",{className:"panel"},r.a.createElement("h1",{className:"panel__main-heading"},"\u71b1\u9580\u63a8\u85a6",r.a.createElement("span",{className:"panel__heading-deco icon-star"})),r.a.createElement(s.b,{href:"/nearby"},r.a.createElement("a",{className:"panel__view-more",title:"\u770b\u66f4\u591a-\u71b1\u9580\u63a8\u85a6"},"\u770b\u66f4\u591a")),r.a.createElement("div",{className:"card-list"},this.renderCards(e))))}}]),a}(n.Component);Ze.defaultProps={favList:null,hotStoresData:[]};var $e=Object(l.b)((function(e){return e}))(Ze),et=(a(354),function(e){var t=e.store;return r.a.createElement("div",null,r.a.createElement("div",{key:t.id,className:"store-item"},r.a.createElement("div",{className:"store-item__image",style:{background:"#e8e8e8",width:"175px",height:"175px"}},r.a.createElement(ye.a,{offsetVertical:100,height:175},r.a.createElement("figure",null,r.a.createElement("picture",null,r.a.createElement("source",{media:"all",srcSet:"".concat(t.image[5].url," 1x, ").concat(t.image[6].url," 2x"),type:"image/webp"}),r.a.createElement("source",{media:"all",srcSet:"".concat(t.image[1].url," 1x, ").concat(t.image[2].url," 2x"),type:"image/jpeg"}),r.a.createElement("img",{src:t.image[1].url,alt:t.name})),r.a.createElement("figcaption",{className:"hide"},t.name)))),r.a.createElement("div",{className:"store-item__container"},r.a.createElement("h2",{className:"store-item__title"},r.a.createElement(s.b,{href:"/store?id=".concat(t.id)},r.a.createElement("a",{title:t.name},t.name))),r.a.createElement("div",{className:"store-item__description "},t.description),r.a.createElement("ul",{className:"store-item__detail"},r.a.createElement("li",{className:"store-item__detail__item"},r.a.createElement("i",{className:"store-item__detail__item__icon icon-pin-map",title:K}),r.a.createElement("a",{title:q,href:"https://www.google.com.tw/maps/search/".concat(t.location.address),target:"_blank",rel:"noopener noreferrer"},t.location.address)),r.a.createElement("li",{className:"store-item__detail__item"},r.a.createElement("i",{className:"store-item__detail__item__icon icon-phone",title:J}),r.a.createElement("a",{title:J,href:"".concat(t.phone),target:"_blank",rel:"noopener noreferrer"},t.phone)),r.a.createElement("li",{className:"store-item__detail__item"},r.a.createElement("i",{className:"store-item__detail__item__icon icon-clock-circular-outline",title:z}),t.openingHour.start,"~",t.openingHour.end),r.a.createElement("li",{className:"store-item__detail__item"},r.a.createElement("i",{className:"store-item__detail__item__icon icon-dollar",title:X}),t.price.lowest,"~",t.price.highest),r.a.createElement("li",{className:"store-item__detail__item"},r.a.createElement("i",{className:"store-item__detail__item__icon icon-global",title:W}),r.a.createElement("a",{title:t.name,href:"".concat(t.sns.website),target:"_blank",rel:"noopener noreferrer"},t.name))),r.a.createElement("div",{className:"store-item__tag-list"},t.tags.map((function(e){return r.a.createElement("div",{key:e,className:"store-item__tag-item"},r.a.createElement(s.b,{href:"/tag?keyword=".concat(e)},r.a.createElement("a",{className:"store-item__tag-link",title:e},e)))}))),r.a.createElement(we,{store:t}))))}),tt=function(e){Object(g.a)(a,e);var t=Object(v.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(_.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,a=e.router.query.keyword;t(a?F(a):{type:"FETCH_STORE_LIST",payload:x.firestore().collection("stores").orderBy("id").get()})}},{key:"componentDidUpdate",value:function(e){var t=this.props.dispatch,a=this.props.router.query.keyword;a!==e.router.query.keyword&&t(F(a))}},{key:"render",value:function(){var e=this.props.stores,t=this.props.router.query.keyword,a=y.a.isArray(e)&&y.a.isEmpty(e),n=y.a.isObject(e)&&!y.a.isArray(e)&&y.a.isEmpty(e);return r.a.createElement(ve,{title:"\u6a19\u7c64\u9801",id:"tag"},r.a.createElement("div",{className:"panel"},!a&&r.a.createElement("h1",{className:"panel__main-heading mb-2x"},t),function(e){return y.a.map(e,(function(e){return r.a.createElement(et,{key:e.id,store:e})}))}(e),a&&r.a.createElement(Je,{tags:R.slice(0,3)}),n&&r.a.createElement("div",{className:"icon-loading store-item__loading"})))}}]),a}(n.Component),at=Object(m.f)(Object(l.b)((function(e){return e}))(tt)),nt=a(157),rt=a(67),it=a(24),ct=Object(o.c)({stores:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=[];switch(t.type){case"FETCH_STORE_LIST":case"FETCH_STORE_LIST_BY_TAG":return t.payload.forEach((function(e){a=[].concat(Object(rt.a)(a),[e.data()])})),a.forEach((function(e){"object"===typeof e.tags&&(e.tags=y.a.keys(e.tags))})),a;default:return e}},filteredStores:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=[],n=[],r=[];switch(t.type){case"FETCH_NEARBY_STORE_LIST":return y.a.forEach(t.payload.docs,(function(e){r.push(e.data())})),y.a.forEach(r,(function(e){"object"===typeof e.tags&&(e.tags=y.a.keys(e.tags))})),Object(it.a)(Object(it.a)({},e),{},{nearbyStoresData:r});case"FETCH_RECOMMEND_STORE_LIST":return y.a.forEach(t.payload.docs,(function(e){n.push(e.data())})),y.a.forEach(n,(function(e){"object"===typeof e.tags&&(e.tags=y.a.keys(e.tags))})),Object(it.a)(Object(it.a)({},e),{},{recommendStoresData:n});case"FETCH_HOT_STORE_LIST":return y.a.forEach(t.payload.docs,(function(e){a.push(e.data())})),y.a.forEach(a,(function(e){"object"===typeof e.tags&&(e.tags=y.a.keys(e.tags))})),Object(it.a)(Object(it.a)({},e),{},{hotStoresData:a});default:return e}},slideshows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=[];switch(t.type){case"FETCH_SLIDES_DATA":return y.a.forEach(t.payload.docs,(function(e){a.push(e.data())})),Object(it.a)(Object(it.a)({},e),{},{slidesData:a});default:return e}},form:nt.a,store:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=[];switch(t.type){case"FETCH_STORE_INFO":return t.payload.forEach((function(e){a=[].concat(Object(rt.a)(a),[e.data()])})),a.forEach((function(e){"object"===typeof e.tags&&(e.tags=y.a.keys(e.tags))})),a[0];default:return e}},storeComments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=[],n="";switch(t.type){case"FETCH_STORE_COMMENTS":return t.payload.forEach((function(e){n=e.id,a=[].concat(Object(rt.a)(a),[e.data()])})),{id:n,commentList:a};default:return e}},favList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=[];switch(t.type){case"FETCH_FAV_LIST":return y.a.forEach(t.payload.docs,(function(e){a.push(e.data())})),Object(it.a)({},a[0].list);default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var a=JSON.stringify(t.payload.userInfo);return document.cookie="".concat("dotchfooduser","=").concat(a,"; path=/"),Object(it.a)(Object(it.a)({},e),{},{isLogin:t.payload.isLogin,userInfo:t.payload.userInfo});case"LOGOUT":return document.cookie="".concat("dotchfooduser","=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"),Object(it.a)(Object(it.a)({},e),{},{isLogin:!1,userInfo:null});case"RESTORE_USER_INFO":return Object(it.a)(Object(it.a)({},e),{},{isLogin:!0,userInfo:t.payload});default:return e}}}),lt=Object(o.a)(u.a)(o.d);c.a.render(r.a.createElement(p.a,null,r.a.createElement(h.a,null),r.a.createElement(f.a,null,r.a.createElement(l.a,{store:lt(ct)},r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/tag/:keyword",component:at}),r.a.createElement(m.a,{path:"/store/:id",component:Xe}),r.a.createElement(m.a,{path:"/fav/",component:$e}),r.a.createElement(m.a,{path:"/",component:Se}))))))),document.getElementById("root"))}},[[196,1,2]]]);
//# sourceMappingURL=main.14f1d32a.chunk.js.map