{"version":3,"sources":["actions/index.js","constants/config.js","constants/index.js","data/data.js","components/header.js","components/tag_list.js","components/footer.js","components/page.js","components/store_control_button.js","components/card.js","containers/index.js","components/feature_list.js","components/tabs_nav.js","components/tabs_panel.js","components/tabs.js","components/store_comments.js","components/comment_form.js","components/store_review.js","components/store_info.js","components/not_found.js","containers/store.js","components/favlist.js","containers/fav.js","components/store_item.js","containers/tag.js","reducers/user.js","reducers/index.js","reducers/reducer_stores.js","reducers/reducer_filtered_stores.js","reducers/reducer_slideshows.js","reducers/reducer_store.js","reducers/reducer_store_comments.js","reducers/favlist.js","index.js"],"names":["firebase","require","apps","length","initializeApp","apiKey","authDomain","projectId","fetchStoreListByTag","tag","type","payload","firestore","collection","where","get","fetchRecommendStoreList","limit","fetchHotStoreList","addFavList","userID","store","doc","update","list","FieldValue","arrayUnion","fetchStoreInfo","id","fetchStoreComments","hotTags","news","categories","className","title","show","hotCategories","hotTopics","link","common","icon","features","menu","modalType","needLogin","MODAL_TYPE","LOGIN","Header","props","state","account","keyword","password","onSeachHandler","bind","onSearchInputChange","renderLoginModal","renderMenuItems","renderMenuList","renderSearchBox","this","dispatch","cookies","JSON","parse","setState","e","key","target","value","history","push","isLogin","user","_","map","item","to","onClick","placeholder","aria-label","onChange","onKeyPress","Modal","isOpen","onClose","FormControl","FormLabel","htmlFor","Input","onAccountInputChange","onPasswordInputChange","Button","variant","loginCallback","then","res","userInfo","forEach","docs","data","catch","error","console","login","LOGON","Component","withRouter","withCookies","connect","TagList","tags","Footer","topics","href","rel","Page","reverse","children","StoreControlButtons","booking","phone","iconData","online","location","address","Card","isChangeFavStatus","isFavorite","handleAddFavList","prevProps","prevState","setTimeout","isFavoriteState","iconStyle","flashStyle","offsetVertical","media","srcSet","image","url","src","alt","name","Index","renderCards","stores","args","filteredStores","hotStoresData","nearbyStoresData","recommendStoresData","defaultProps","FeatureList","cashOnly","customService","family","mrt","noTimeLimit","pokemon","parking","pet","socket","takeout","twentyfourhr","wifi","featureData","TabsNav","nav","activeIndex","onClickTabNavHandler","activeClass","onKeyDown","TabsPanel","panel","hash","content","Tabs","tabs","StoreComments","commentList","comments","required","undefined","renderTextField","input","autocomplete","meta","touched","warning","renderSelectField","label","CommentDataForm","storeid","closeForm","isFormValid","resetFormStatus","handleSubmit","pristine","reset","submitting","handleSubmitFail","showForm","showErrMsg","showSuccessMsg","onSubmit","onSubmitFail","Field","component","validate","disabled","reduxForm","form","StoreReview","isOpenReviewForm","renderStoreComments","enableCommentForm","handleFormSubmit","closeStoreCommentForm","change","values","formData","docid","rating","meal","date","saveCommentData","add","insertCommentData","status","commentInfo","StoreInfo","index","onClickHandler","renderStoreInfo","openingHour","start","end","price","lowest","highest","sns","website","style","background","width","height","description","Notfound","ref","card","Store","router","match","params","storeComments","isNotFound","isEmpty","isLoading","isObject","slice","FavList","renderCardList","renderNoDataHint","preProps","prevUserID","fetchFavList","favList","isEmptyFavList","size","Fav","StoreItem","Tag","orderBy","isArray","renderStores","intialState","rootReducer","combineReducers","action","storesData","keys","slideshows","slidesData","FormReducer","storeInfo","favData","userInfoString","stringify","document","cookie","createStoreWithMiddleware","applyMiddleware","promise","createStore","ReactDOM","render","ThemeProvider","CSSReset","CookiesProvider","reducers","path","getElementById"],"mappings":"6tBA6BMA,G,OAAWC,EAAQ,MACzBA,EAAQ,KAEHD,EAASE,KAAKC,QACjBH,EAASI,cAAc,CACrBC,OClCmB,0CDmCnBC,WClCuB,6BDmCvBC,UClCsB,eDsCnB,IAOMC,EAAsB,SAACC,GAClC,MAAO,CACLC,KE/CmC,0BFgDnCC,QAASX,EAASY,YAAYC,WAAW,UAAUC,MAA1C,eAAwDL,GAAO,MAAM,GAAMM,QAW3EC,EAA0B,WACrC,MAAO,CACLN,KE1DsC,6BF2DtCC,QAASX,EAASY,YAAYC,WAAW,UAAUC,MAAM,YAAa,MAAM,GAAMG,MAAM,GAAGF,QAIlFG,EAAoB,WAC/B,MAAO,CACLR,KEhEgC,uBFiEhCC,QAASX,EAASY,YAAYC,WAAW,UAAUC,MAAM,MAAO,MAAM,GAAMG,MAAM,GAAGF,QAoB5EI,EAAa,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,OAAQC,EAAY,EAAZA,MACnC,MAAO,CACLX,KE1EwB,eF2ExBC,QAASX,EAASY,YAAYC,WAAW,WAAWS,IAAIF,GAAQG,OAAO,CACrEC,KAAMxB,EAASY,UAAUa,WAAWC,WAAWL,OAKxCM,EAAiB,SAACC,GAC7B,MAAO,CACLlB,KE7F4B,mBF8F5BC,QAASX,EAASY,YAAYC,WAAW,UAAUC,MAAM,KAAM,KAAMc,GAAIX,MAAM,GAAGF,QAsiBzEc,EAAqB,SAACD,GACjC,MAAO,CACLlB,KE9nBgC,uBF+nBhCC,QAASX,EAASY,YAAYC,WAAW,YAAYC,MAAM,KAAM,KAAMc,GAAIX,MAAM,GAC9EF,QGjpBMe,EAAU,CACnB,2BACA,qBACA,eACA,eACA,eACA,eACA,eACA,qBACA,qBACA,gBAGWC,EAAO,CAClB,yYACA,+IACA,6IACA,kJAGWC,EAAa,CACxB,CACEJ,GAAI,uCACJK,UAAW,YACXC,MAAO,eACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,SACXC,MAAO,eACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,QACXC,MAAO,eACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,UACXC,MAAO,eACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,UACXC,MAAO,eACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,YACXC,MAAO,eACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,YACXC,MAAO,eACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,YACXC,MAAO,eACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,QACXC,MAAO,eACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,UACXC,MAAO,2BACPzB,IAAK,uCACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,MACXC,MAAO,eACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,SACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,QACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,MACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,OACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,YACXC,MAAO,4BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,eACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,YACXC,MAAO,eACPzB,IAAK,gBAEP,CACEmB,GAAI,uCACJK,UAAW,UACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,WACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,aACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,gBACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,uBACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,OACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,UACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,UACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,kBACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,UACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,OACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,WACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,OACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,SACXC,MAAO,MACPzB,IAAK,MACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,aACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,eACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,QACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,uCACJK,UAAW,eACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,IAIGC,EAAgB,CAC3B,CACER,GAAI,IACJK,UAAW,QACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,IACJK,UAAW,WACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,IACJK,UAAW,QACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,IACJK,UAAW,SACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,IACJK,UAAW,aACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,IACJK,UAAW,QACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,IACJK,UAAW,gBACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,IACJK,UAAW,UACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,IACJK,UAAW,YACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,eACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,SACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,YACXC,MAAO,qBACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,UACXC,MAAO,SACPzB,IAAK,SACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,OACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,gBACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,YACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,UACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,SACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,SACXC,MAAO,MACPzB,IAAK,MACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,YACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,MACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,OACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,aACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,YACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,WACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,WACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,OACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,iBACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,WACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,QACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,mBACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,eACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,KACJK,UAAW,OACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,GAER,CACEP,GAAI,MACJK,UAAW,QACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,MACJK,UAAW,SACXC,MAAO,2BACPzB,IAAK,2BACL0B,MAAM,GAER,CACEP,GAAI,MACJK,UAAW,QACXC,MAAO,qBACPzB,IAAK,qBACL0B,MAAM,GAER,CACEP,GAAI,MACJK,UAAW,WACXC,MAAO,eACPzB,IAAK,eACL0B,MAAM,IAIGE,EAAY,CACvB,CACET,GAAI,uCACJM,MAAO,yDACPI,KAAM,kCACNH,MAAM,GAER,CACEP,GAAI,uCACJM,MAAO,+DACPI,KAAM,8CACNH,MAAM,GAER,CACEP,GAAI,uCACJM,MAAO,2EACPI,KAAM,4BACNH,MAAM,GAER,CACEP,GAAI,uCACJM,MAAO,mDACPI,KAAM,wCACNH,MAAM,GAER,CACEP,GAAI,uCACJM,MAAO,uFACPI,KAAM,kCACNH,MAAM,GAER,CACEP,GAAI,uCACJM,MAAO,qEACPI,KAAM,4BACNH,MAAM,GAER,CACEP,GAAI,uCACJM,MAAO,sFACPI,KAAM,kCACNH,MAAM,GAE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","file":"static/js/main.511a08e7.chunk.js","sourcesContent":["import _ from 'lodash';\nimport { v4 as uuidv4 } from 'uuid';\nimport {\n  ADD_FAV_LIST,\n  DOTCH_FOOD_COOKIE_KEY,\n  FETCH_FAV_LIST,\n  FETCH_HOT_STORE_LIST,\n  FETCH_NEARBY_STORE_LIST,\n  FETCH_RECOMMEND_STORE_LIST,\n  FETCH_SLIDES_DATA,\n  FETCH_STORE_COMMENTS,\n  FETCH_STORE_INFO,\n  FETCH_STORE_LIST_BY_TAG,\n  FETCH_STORE_LIST,\n  INSERT_FAV_LIST,\n  INSERT_STORE_COMMENT,\n  LOGIN,\n  LOGOUT,\n  RESTORE_USER_INFO,\n  SAVE_STORE_COMMENT,\n  SAVE_STORE_DATA,\n} from '../constants';\nimport { DEFAULT_IMAGE } from '../constants/common';\nimport {\n  API_KEY,\n  AUTH_DOMAIN,\n  PROJECT_ID,\n} from '../constants/config';\n\nconst firebase = require('firebase');\nrequire('firebase/firestore');\n\nif (!firebase.apps.length) {\n  firebase.initializeApp({\n    apiKey: API_KEY,\n    authDomain: AUTH_DOMAIN,\n    projectId: PROJECT_ID,\n  });\n}\n\nexport const fetchStoreList = () => {\n  return {\n    type: FETCH_STORE_LIST,\n    payload: firebase.firestore().collection('stores').orderBy('id').get(),\n  };\n}\n\nexport const fetchStoreListByTag = (tag) => {\n  return {\n    type: FETCH_STORE_LIST_BY_TAG,\n    payload: firebase.firestore().collection('stores').where(`tags.${tag}`, '==', true).get(),\n  };\n}\n\nexport const fetchNearbyStoreList = () => {\n  return {\n    type: FETCH_NEARBY_STORE_LIST,\n    payload: firebase.firestore().collection('stores').where('nearby', '==', true).limit(4).get(),\n  };\n}\n\nexport const fetchRecommendStoreList = () => {\n  return {\n    type: FETCH_RECOMMEND_STORE_LIST,\n    payload: firebase.firestore().collection('stores').where('recommend', '==', true).limit(4).get(),\n  };\n}\n\nexport const fetchHotStoreList = () => {\n  return {\n    type: FETCH_HOT_STORE_LIST,\n    payload: firebase.firestore().collection('stores').where('hot', '==', true).limit(4).get(),\n  };\n}\n\nexport const fetchFavList = (userID) => {\n  return {\n    type: FETCH_FAV_LIST,\n    payload: firebase.firestore().collection('favlist').where('id', '==', userID).limit(20).get(),\n  };\n}\n\nexport const insertFavList = ({ userID, store }) => {\n  return {\n    type: INSERT_FAV_LIST,\n    payload: firebase.firestore().collection('favlist').doc(userID).set({\n      list: [store],\n    }),\n  };\n}\n\nexport const addFavList = ({ userID, store }) => {\n  return {\n    type: ADD_FAV_LIST,\n    payload: firebase.firestore().collection('favlist').doc(userID).update({\n      list: firebase.firestore.FieldValue.arrayUnion(store),\n    }),\n  };\n}\n\nexport const fetchStoreInfo = (id) => {\n  return {\n    type: FETCH_STORE_INFO,\n    payload: firebase.firestore().collection('stores').where('id', '==', id).limit(1).get(),\n  };\n}\n\nexport const fetchSlidesData = () => {\n  return {\n    type: FETCH_SLIDES_DATA,\n    payload: firebase.firestore().collection('slideshows').orderBy('id').get(),\n  };\n}\n\nexport const saveStoreData = (formData) => {\n  const imageName = formData.image || DEFAULT_IMAGE;\n  const bookingPhone = formData.isBookingPhone ? formData.phone : null;\n  const tagArray = formData.tags ? formData.tags.split(' ') : [];\n  let tagList = {};\n  let featureList = {};\n\n  if (tagArray.length) {\n    _.each(tagArray, (item) => {\n      const obj = {};\n      obj[item] = true;\n      tagList = Object.assign(tagList, obj);\n    });\n  } else {\n    tagList = {\n      測試: true,\n    };\n  }\n\n  if (formData.twentyfourhr) {\n    const feature = {};\n    feature.twentyfourhr = true;\n    featureList = Object.assign(featureList, feature);\n\n    const obj = {};\n    obj['24 小時營業'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.mrt) {\n    const feature = {};\n    feature.mrt = true;\n    featureList = Object.assign(featureList, feature);\n\n    const obj = {};\n    obj['捷運沿線'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.noTimeLimit) {\n    const feature = {};\n    feature.noTimeLimit = true;\n    featureList = Object.assign(featureList, feature);\n\n    const obj = {};\n    obj['不限時'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.parking) {\n    const feature = {};\n    feature.parking = true;\n    featureList = Object.assign(featureList, feature);\n\n    const obj = {};\n    obj['停車位'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.socket) {\n    const feature = {};\n    feature.socket = true;\n    featureList = Object.assign(featureList, feature);\n\n    // const obj = {};\n    // obj['提供插座'] = true;\n    // tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.takeout) {\n    const feature = {};\n    feature.takeout = true;\n    featureList = Object.assign(featureList, feature);\n\n    const obj = {};\n    obj['外帶'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.wifi) {\n    const feature = {};\n    feature.wifi = true;\n    featureList = Object.assign(featureList, feature);\n\n    // const obj = {};\n    // obj['wifi'] = true;\n    // tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.cashOnly) {\n    const feature = {};\n    feature.cashOnly = true;\n    featureList = Object.assign(featureList, feature);\n\n    // const obj = {};\n    // obj['只接受現金'] = true;\n    // tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.customService) {\n    const feature = {};\n    feature.customService = true;\n    featureList = Object.assign(featureList, feature);\n\n    // const obj = {};\n    // obj['客製化服務'] = true;\n    // tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.family) {\n    const feature = {};\n    feature.family = true;\n    featureList = Object.assign(featureList, feature);\n\n    const obj = {};\n    obj['親子友善'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.pet) {\n    const feature = {};\n    feature.pet = true;\n    featureList = Object.assign(featureList, feature);\n\n    const obj = {};\n    obj['寵物友善'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.pokemon) {\n    const feature = {};\n    feature.pokemon = true;\n    featureList = Object.assign(featureList, feature);\n\n    const obj = {};\n    obj['寶可夢'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.sushi) {\n    const obj = {};\n    obj['壽司'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.brunch) {\n    const obj = {};\n    obj['早午餐'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.barbecue) {\n    const obj = {};\n    obj['燒烤'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.burger) {\n    const obj = {};\n    obj['漢堡'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.salad) {\n    const obj = {};\n    obj['輕食'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.steak) {\n    const obj = {};\n    obj['牛排'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.cake) {\n    const obj = {};\n    obj['甜點'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.dimsum) {\n    const obj = {};\n    obj['港式料理'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.lowprice) {\n    const obj = {};\n    obj['平價'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.beer) {\n    const obj = {};\n    obj['居酒屋'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.coffee) {\n    const obj = {};\n    obj['咖啡'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.thaifood) {\n    const obj = {};\n    obj['泰國菜'] = true;\n    tagList = Object.assign(tagList, obj);\n\n    const obj1 = {};\n    obj1['泰式料理'] = true;\n    tagList = Object.assign(tagList, obj1);\n  }\n\n  if (formData.tea) {\n    const obj = {};\n    obj['茶'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.crab) {\n    const obj = {};\n    obj['海鮮'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.friedchicken) {\n    const obj = {};\n    obj['炸雞'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.americanfood) {\n    const obj = {};\n    obj['美式料理'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.rice) {\n    const obj = {};\n    obj['家常菜'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.lettuce) {\n    const obj = {};\n    obj['素食'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.skewer) {\n    const obj = {};\n    obj['串燒'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.baking) {\n    const obj = {};\n    obj['DIY'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.spaguetti) {\n    const obj = {};\n    obj['義大利麵'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.pot) {\n    const obj = {};\n    obj['火鍋'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.doll) {\n    const obj = {};\n    obj['主題特色'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.foodtruck) {\n    const obj = {};\n    obj['小販餐車'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.superheroe) {\n    const obj = {};\n    obj['漫畫雜誌'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.socialmedia) {\n    const obj = {};\n    obj['拍照打卡'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.sofa) {\n    const obj = {};\n    obj['沙發'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.movie) {\n    const obj = {};\n    obj['桌邊服務'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n  if (formData.review) {\n    const obj = {};\n    obj['特別推薦'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.baker) {\n    const obj = {};\n    obj['無菜單'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.delivery) {\n    const obj = {};\n    obj['外送'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.ricebowl) {\n    const obj = {};\n    obj['中式料理'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.japanesefood) {\n    const obj = {};\n    obj['日式料理'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.sashimi) {\n    const obj = {};\n    obj['韓式料理'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.italianfood) {\n    const obj = {};\n    obj['義式料理'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.croissant) {\n    const obj = {};\n    obj['法式料理'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.curry) {\n    const obj = {};\n    obj['印度料理'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.merlion) {\n    const obj = {};\n    obj['星馬南洋料理'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.wok) {\n    const obj = {};\n    obj['異國料理'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.buffet) {\n    const obj = {};\n    obj['吃到飽'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.tray) {\n    const obj = {};\n    obj['鐵板燒'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.cafe) {\n    const obj = {};\n    obj['複合餐飲'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.selfservice) {\n    const obj = {};\n    obj['自助餐'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.lunchbox) {\n    const obj = {};\n    obj['便當'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.popcorn) {\n    const obj = {};\n    obj['速食'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.dessert) {\n    const obj = {};\n    obj['下午茶'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.beerbar) {\n    const obj = {};\n    obj['酒吧'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.noodles) {\n    const obj = {};\n    obj['小吃'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.instant) {\n    const obj = {};\n    obj['調理包'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.network) {\n    const obj = {};\n    obj['網咖'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.drink) {\n    const obj = {};\n    obj['咖啡茶飲'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.toast) {\n    const obj = {};\n    obj['烘焙糕點'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  if (formData.other) {\n    const obj = {};\n    obj['其他'] = true;\n    tagList = Object.assign(tagList, obj);\n  }\n\n  const data = {\n    id: uuidv4(),\n    name: formData.name || '測試',\n    description: formData.description || null,\n    image: [\n      // original\n      {\n        url: `https://res.cloudinary.com/dfgridmvn/image/upload/${imageName}.png`,\n      },\n      // 177 jpg\n      {\n        url: `https://res.cloudinary.com/dfgridmvn/image/upload/c_scale,w_177,fl_progressive/${imageName}.jpg`,\n      },\n      // 354 jpg\n      {\n        url: `https://res.cloudinary.com/dfgridmvn/image/upload/c_scale,w_354,fl_progressive/${imageName}.jpg`,\n      },\n      // 531 jpg\n      {\n        url: `https://res.cloudinary.com/dfgridmvn/image/upload/c_scale,w_531,fl_progressive/${imageName}.jpg`,\n      },\n      // 708 jpg\n      {\n        url: `https://res.cloudinary.com/dfgridmvn/image/upload/c_scale,w_708,fl_progressive/${imageName}.jpg`,\n      },\n      // 177 webp\n      {\n        url: `https://res.cloudinary.com/dfgridmvn/image/upload/c_scale,w_177,fl_progressive/${imageName}.webp`,\n      },\n      // 354 webp\n      {\n        url: `https://res.cloudinary.com/dfgridmvn/image/upload/c_scale,w_354,fl_progressive/${imageName}.webp`,\n      },\n      // 531 webp\n      {\n        url: `https://res.cloudinary.com/dfgridmvn/image/upload/c_scale,w_531,fl_progressive/${imageName}.webp`,\n      },\n      // 708 webp\n      {\n        url: `https://res.cloudinary.com/dfgridmvn/image/upload/c_scale,w_708,fl_progressive/${imageName}.webp`,\n      },\n    ],\n    phone: formData.phone || null,\n    location: {\n      address: formData.address || null,\n      zip: formData.zip || null,\n      coordinates: null,\n    },\n    openingHour: {\n      start: formData.start || '0 AM',\n      end: formData.end || '0 PM',\n    },\n    price: {\n      lowest: formData.lowest || 0,\n      highest: formData.highest || 999999,\n    },\n    booking: {\n      online: formData.bookingOnline || null,\n      phone: bookingPhone,\n    },\n    sns: {\n      facebook: formData.facebook || null,\n      website: formData.website || null,\n    },\n    hot: false,\n    nearby: false,\n    recommend: false,\n    tags: tagList,\n    features: featureList,\n  };\n\n  return {\n    type: SAVE_STORE_DATA,\n    // payload: firebase.firestore().collection('stores').add(data),\n    payload: firebase.firestore().collection('test').add(data),\n    // payload: firebase.firestore().collection('test').add('123'),\n  };\n}\n\nexport const fetchStoreComments = (id) => {\n  return {\n    type: FETCH_STORE_COMMENTS,\n    payload: firebase.firestore().collection('comments').where('id', '==', id).limit(5)\n      .get(),\n  };\n}\n\nexport const saveCommentData = (formData) => {\n  const {\n    docid, user, rating, meal, date, content,\n  } = formData;\n  const data = {\n    user, rating, meal, date, content,\n  };\n\n  return {\n    type: SAVE_STORE_COMMENT,\n    payload: firebase.firestore().collection('comments').doc(docid).update({\n      comments: firebase.firestore.FieldValue.arrayUnion(data),\n    }),\n  };\n}\n\nexport const insertCommentData = (formData) => {\n  const {\n    id, user, rating, meal, date, content,\n  } = formData;\n\n  return {\n    type: INSERT_STORE_COMMENT,\n    payload: firebase.firestore().collection('comments').add({\n      id,\n      comments: [\n        {\n          user, rating, meal, date, content,\n        },\n      ],\n    }),\n  };\n}\n\nexport const login = (account, password, loginCallback) => {\n  return {\n    type: LOGIN,\n    payload: firebase.firestore().collection('users').where('id', '==', account).get()\n    .then(function(res) {\n      let userInfo = [];\n\n      _.forEach(res.docs, (doc) => {\n        userInfo.push(doc.data());\n      });\n\n      if (userInfo[0].password === password) {\n        loginCallback();\n        return { isLogin: true, userInfo: userInfo[0]};\n      } else {\n        return { isLogin: false, userInfo: { id: null } };\n      }\n    })\n    .catch(function(error) {\n      console.error('Error occurred: ', error);\n    })\n  };\n}\n\nexport const logout = () => {\n  return {\n    type: LOGOUT,\n  }\n}\n\nexport const restoreUserInfo = (userInfo) => {\n  return {\n    type: RESTORE_USER_INFO,\n    payload: userInfo,\n  }\n}\n","export const API_KEY = 'AIzaSyC_xPAyKYsvuIuT6mceI_8gow7H3cSo3BI';\nexport const AUTH_DOMAIN = 'dotch-food.firebaseapp.com';\nexport const PROJECT_ID = 'dotch-food';\n","// actions\nexport const FETCH_STORE_LIST = 'FETCH_STORE_LIST';\nexport const FETCH_STORE_LIST_BY_TAG = 'FETCH_STORE_LIST_BY_TAG';\n\nexport const FETCH_NEARBY_STORE_LIST = 'FETCH_NEARBY_STORE_LIST'; // 離我最近\nexport const FETCH_RECOMMEND_STORE_LIST = 'FETCH_RECOMMEND_STORE_LIST'; // 猜你想吃\nexport const FETCH_HOT_STORE_LIST = 'FETCH_HOT_STORE_LIST'; // 熱門推薦\nexport const FETCH_FAV_LIST = 'FETCH_FAV_LIST'; // 我的最愛\n\nexport const FETCH_STORE_INFO = 'FETCH_STORE_INFO';\n\nexport const FETCH_SLIDES_DATA = 'FETCH_SLIDES_DATA';\nexport const FETCH_SLIDES_DATA_SUCCESS = 'FETCH_SLIDES_DATA_SUCCESS';\n\nexport const SAVE_STORE_DATA = 'SAVE_STORE_DATA';\nexport const SAVE_STORE_COMMENT = 'SAVE_STORE_COMMENT';\nexport const INSERT_STORE_COMMENT = 'INSERT_STORE_COMMENT';\nexport const FETCH_STORE_COMMENTS = 'FETCH_STORE_COMMENTS';\n\nexport const ADD_FAV_LIST = 'ADD_FAV_LIST';\nexport const INSERT_FAV_LIST = 'INSERT_FAV_LIST';\n\nexport const LOGIN = 'LOGIN';\nexport const LOGOUT = 'LOGOUT';\nexport const RESTORE_USER_INFO = 'RESTORE_USER_INFO';\n\n// storage keys\nexport const DOTCH_FOOD_COOKIE_KEY = 'dotchfooduser';\n","export const hotTags = [\n    '日式料理',\n    '早午餐',\n    '沙拉',\n    '燒烤',\n    '漢堡',\n    '輕食',\n    '牛排',\n    '生魚片',\n    '關東煮',\n    '平價',\n  ];\n\n  export const news = [\n    '今天吃飯，該吃什麼好呢？只要輸入美食欲望，立刻給你最真實、現場、生活化的評價，找餐廳再也不煩惱，就讓吃什麼，どっち幫你決定吃什麼！',\n    '來自名古屋的早餐，Komeda coffee 鬆軟奶油吐司，南京松江站',\n    '與小熊維尼的午茶約會！新宿「蜂蜜咖啡」限定登場',\n    '七夕就是要浪漫一下！全台精選 10 家特色浪漫景觀餐廳',\n  ];\n\n  export const categories = [\n    {\n      id: 'bd3060eb-a952-4a5e-a4ec-b2cb91544786',\n      className: 'rice-bowl',\n      title: '中式',\n      tag: '中式料理',\n      show: true,\n    },\n    {\n      id: '183bde18-13b3-420e-bdfe-f33d36c26d22',\n      className: 'burger',\n      title: '美式',\n      tag: '美式料理',\n      show: true,\n    },\n    {\n      id: '4df916eb-6b84-4cd9-a3ba-aa80b89cb9f8',\n      className: 'sushi',\n      title: '日式',\n      tag: '日式料理',\n      show: true,\n    },\n    {\n      id: '4830b325-3623-4a4e-88d5-91f879baa5e8',\n      className: 'dim-sum',\n      title: '港式',\n      tag: '港式料理',\n      show: true,\n    },\n    {\n      id: '10283f0d-5e51-4503-8898-bef0d0e67dce',\n      className: 'sashimi',\n      title: '韓式',\n      tag: '韓式料理',\n      show: true,\n    },\n    {\n      id: '007f4c15-4782-4560-b7c9-f5c91f4ae4bf',\n      className: 'thai-food',\n      title: '泰式',\n      tag: '泰式料理',\n      show: true,\n    },\n    {\n      id: '15eedeed-0786-405d-bb8a-8e06596f6afe',\n      className: 'spaguetti',\n      title: '義式',\n      tag: '義式料理',\n      show: true,\n    },\n    {\n      id: '2421f4e0-c479-4c0b-84f9-998b44a7aadd',\n      className: 'croissant',\n      title: '法式',\n      tag: '法式料理',\n      show: true,\n    },\n    {\n      id: 'a25b7aa8-87b6-4ad3-8cc7-8529190ab006',\n      className: 'curry',\n      title: '印度',\n      tag: '印度料理',\n      show: true,\n    },\n    {\n      id: 'bc41ee12-8b72-4bf4-9961-3919c302301b',\n      className: 'merlion',\n      title: '星馬南洋',\n      tag: '星馬南洋料理',\n      show: true,\n    },\n    {\n      id: '086f0866-1ed4-4d5d-836f-4b42ebaec24d',\n      className: 'wok',\n      title: '異國',\n      tag: '異國料理',\n      show: true,\n    },\n    {\n      id: '76363331-4912-453c-ab98-4aba16dde936',\n      className: 'buffet',\n      title: '吃到飽',\n      tag: '吃到飽',\n      show: true,\n    },\n    {\n      id: '5cdce9c4-c9b5-425f-b62d-bdc903b56abd',\n      className: 'grill',\n      title: '燒烤',\n      tag: '燒烤',\n      show: true,\n    },\n    {\n      id: '290a27f2-e3b6-4638-9857-7efbd06dece2',\n      className: 'pot',\n      title: '火鍋',\n      tag: '火鍋',\n      show: true,\n    },\n    {\n      id: 'e64fe1f3-f627-4041-89e4-1e9ade3ada43',\n      className: 'tray',\n      title: '鐵板燒',\n      tag: '鐵板燒',\n      show: true,\n    },\n    {\n      id: '1e6d0d1b-e152-434a-a954-8cf205ab1c19',\n      className: 'breakfast',\n      title: '複合/簡餐',\n      tag: '複合餐飲',\n      show: true,\n    },\n    {\n      id: '6892b0ab-b7be-41d1-b84d-e1998089c70b',\n      className: 'self-service',\n      title: '自助餐',\n      tag: '自助餐',\n      show: true,\n    },\n    {\n      id: 'e3561ce3-928a-45c4-8759-6f007230ab58',\n      className: 'lunch-box',\n      title: '便當',\n      tag: '便當',\n    },\n    {\n      id: '31725bce-b40c-11e8-96f8-529269fb1459',\n      className: 'popcorn',\n      title: '速食',\n      tag: '速食',\n      show: true,\n    },\n    {\n      id: '9011f22f-449c-459f-bd1b-6f2924adb39c',\n      className: 'sandwich',\n      title: '早午餐',\n      tag: '早午餐',\n      show: true,\n    },\n    {\n      id: '72815cd4-768a-4e6f-a520-a8fb002d04c2',\n      className: 'salad-bowl',\n      title: '輕食',\n      tag: '輕食',\n      show: true,\n    },\n    {\n      id: '9d2df9cc-c5e5-4eaa-8123-b7c0ee14073d',\n      className: 'piece-of-cake',\n      title: '甜點',\n      tag: '甜點',\n      show: true,\n    },\n    {\n      id: '84c0e0de-3e65-4ab9-bb9a-2f7433ea4a3c',\n      className: 'cake-with-strawberry',\n      title: '下午茶',\n      tag: '下午茶',\n      show: true,\n    },\n    {\n      id: 'e34686f1-88b3-4219-b5fa-62d49a3a368e',\n      className: 'beer',\n      title: '酒吧',\n      tag: '酒吧',\n      show: true,\n    },\n    {\n      id: '01f558aa-ca2d-4ca2-add7-7ca945dba6e9',\n      className: 'noodles',\n      title: '小吃',\n      tag: '小吃',\n      show: true,\n    },\n    {\n      id: 'f3865f75-f4ed-431d-b130-b890b3be444f',\n      className: 'lettuce',\n      title: '素食',\n      tag: '素食',\n      show: true,\n    },\n    {\n      id: 'ac890d9c-b409-11e8-96f8-529269fb1459',\n      className: 'instant-noodles',\n      title: '調理包',\n      tag: '調理包',\n      show: true,\n    },\n    {\n      id: 'c5a95896-c009-4af3-83df-aee304b84ea8',\n      className: 'network',\n      title: '網咖',\n      tag: '網咖',\n      show: true,\n    },\n    {\n      id: 'bea91673-c6b4-4ac3-87b4-b1b9258d9a3e',\n      className: 'doll',\n      title: '主題特色',\n      tag: '主題特色',\n      show: true,\n    },\n    {\n      id: 'a3af7f04-5183-4e47-9905-8705469506d7',\n      className: 'baby-boy',\n      title: '親子友善',\n      tag: '親子友善',\n      show: true,\n    },\n    {\n      id: 'e45de147-ab0a-4c26-a077-b23f03c3e51f',\n      className: 'pets',\n      title: '寵物友善',\n      tag: '寵物友善',\n      show: true,\n    },\n    {\n      id: 'ac891954-b409-11e8-96f8-529269fb1459',\n      className: 'baking',\n      title: 'DIY',\n      tag: 'DIY',\n      show: true,\n    },\n    {\n      id: 'a96feaff-4711-469e-a20f-5fef8f0d9d96',\n      className: 'food-truck',\n      title: '小販餐車',\n      tag: '小販餐車',\n      show: true,\n    },\n    {\n      id: '4479113d-2297-45b8-9657-a35089d59504',\n      className: 'orange-juice',\n      title: '咖啡茶飲',\n      tag: '咖啡茶飲',\n      show: true,\n    },\n    {\n      id: '11ee2741-7a51-4907-93a4-e38a85bcbad6',\n      className: 'toast',\n      title: '烘焙糕點',\n      tag: '烘焙糕點',\n      show: true,\n    },\n    {\n      id: '97c2e5f3-4397-4d47-b80f-88e62521c7f6',\n      className: 'dinner-table',\n      title: '其他',\n      tag: '其他',\n      show: true,\n    },\n  ];\n\n  export const hotCategories = [\n    {\n      id: '1',\n      className: 'sushi',\n      title: '壽司',\n      tag: '壽司',\n      show: true,\n    },\n    {\n      id: '2',\n      className: 'sandwich',\n      title: '早午餐',\n      tag: '早午餐',\n      show: true,\n    },\n    {\n      id: '3',\n      className: 'grill',\n      title: '燒烤',\n      tag: '燒烤',\n      show: true,\n    },\n    {\n      id: '4',\n      className: 'burger',\n      title: '漢堡',\n      tag: '漢堡',\n      show: true,\n    },\n    {\n      id: '5',\n      className: 'salad-bowl',\n      title: '輕食',\n      tag: '輕食',\n      show: true,\n    },\n    {\n      id: '6',\n      className: 'steak',\n      title: '牛排',\n      tag: '牛排',\n      show: true,\n    },\n    {\n      id: '7',\n      className: 'piece-of-cake',\n      title: '甜點',\n      tag: '甜點',\n      show: true,\n    },\n    {\n      id: '8',\n      className: 'dim-sum',\n      title: '港式小點',\n      tag: '港式料理',\n      show: true,\n    },\n    {\n      id: '9',\n      className: 'low-price',\n      title: '平價',\n      tag: '平價',\n      show: true,\n    },\n    {\n      id: '10',\n      className: 'beer-bottles',\n      title: '居酒屋',\n      tag: '居酒屋',\n      show: true,\n    },\n    {\n      id: '11',\n      className: 'coffee',\n      title: '咖啡',\n      tag: '咖啡',\n      show: true,\n    },\n    {\n      id: '12',\n      className: 'thai-food',\n      title: '泰國菜',\n      tag: '泰式料理',\n      show: true,\n    },\n    {\n      id: '13',\n      className: 'tea-cup',\n      title: '茶',\n      tag: '茶',\n      show: true,\n    },\n    {\n      id: '14',\n      className: 'crab',\n      title: '海鮮',\n      tag: '海鮮',\n      show: true,\n    },\n    {\n      id: '15',\n      className: 'fried-chicken',\n      title: '炸雞',\n      tag: '炸雞',\n      show: true,\n    },\n    {\n      id: '16',\n      className: 'rice-bowl',\n      title: '家常菜',\n      tag: '家常菜',\n      show: true,\n    },\n    {\n      id: '17',\n      className: 'lettuce',\n      title: '素食',\n      tag: '素食',\n      show: true,\n    },\n    {\n      id: '18',\n      className: 'skewer',\n      title: '串燒',\n      tag: '串燒',\n      show: true,\n    },\n    {\n      id: '19',\n      className: 'baking',\n      title: 'DIY',\n      tag: 'DIY',\n      show: true,\n    },\n    {\n      id: '20',\n      className: 'spaguetti',\n      title: '義大利麵',\n      tag: '義大利麵',\n      show: true,\n    },\n    {\n      id: '21',\n      className: 'pot',\n      title: '火鍋',\n      tag: '火鍋',\n      show: true,\n    },\n    {\n      id: '22',\n      className: 'doll',\n      title: '主題特色',\n      tag: '主題特色',\n      show: true,\n    },\n    {\n      id: '23',\n      className: 'food-truck',\n      title: '小販餐車',\n      tag: '小販餐車',\n      show: true,\n    },\n    {\n      id: '24',\n      className: 'champagne',\n      title: '慶賀',\n      tag: '慶賀',\n      show: false,\n    },\n    {\n      id: '25',\n      className: 'takeaway',\n      title: '外帶',\n      tag: '外帶',\n      show: true,\n    },\n    {\n      id: '26',\n      className: 'baby-boy',\n      title: '親子友善',\n      tag: '親子友善',\n      show: true,\n    },\n    {\n      id: '27',\n      className: 'pets',\n      title: '寵物友善',\n      tag: '寵物友善',\n      show: true,\n    },\n    {\n      id: '38',\n      className: 'parking-yellow',\n      title: '停車位',\n      tag: '停車位',\n      show: true,\n    },\n    {\n      id: '29',\n      className: 'pokecoin',\n      title: '寶可夢',\n      tag: '寶可夢',\n      show: true,\n    },\n    {\n      id: '30',\n      className: 'train',\n      title: '捷運沿線',\n      tag: '捷運沿線',\n      show: true,\n    },\n    {\n      id: '31',\n      className: 'superheroe-black',\n      title: '漫畫雜誌',\n      tag: '漫畫雜誌',\n      show: true,\n    },\n    {\n      id: '32',\n      className: 'social-media',\n      title: '拍照打卡',\n      tag: '拍照打卡',\n      show: true,\n    },\n    {\n      id: '33',\n      className: 'sofa',\n      title: '沙發',\n      tag: '沙發',\n      show: true,\n    },\n    {\n      id: '996',\n      className: 'movie',\n      title: '桌邊服務',\n      tag: '桌邊服務',\n      show: true,\n    },\n    {\n      id: '997',\n      className: 'review',\n      title: '特別推薦',\n      tag: '特別推薦',\n      show: true,\n    },\n    {\n      id: '998',\n      className: 'baker',\n      title: '無菜單',\n      tag: '無菜單',\n      show: true,\n    },\n    {\n      id: '999',\n      className: 'delivery',\n      title: '外送',\n      tag: '外送',\n      show: true,\n    },\n  ];\n\n  export const hotTopics = [\n    {\n      id: '209b9815-911e-42c0-a501-6757d8c63c62',\n      title: '一個人要吃什麼好？',\n      link: '/tag?keyword=一個人',\n      show: true,\n    },\n    {\n      id: '96997512-6b97-4a5e-95cd-c7d588354a0a',\n      title: '台北最適合約會的餐廳',\n      link: '/tag?keyword=情人節大餐',\n      show: true,\n    },\n    {\n      id: '696cedc7-c4ea-4671-9c53-28897f3acb62',\n      title: '怎麼吃才會瘦？秘訣在這裡',\n      link: '/tag?keyword=瘦身',\n      show: true,\n    },\n    {\n      id: 'f7062e18-79f6-45b8-bb2b-9b883e347b15',\n      title: '遛小孩的好去處！',\n      link: '/tag?keyword=親子友善',\n      show: true,\n    },\n    {\n      id: '69a62d6f-d62e-41be-8bf5-089895c41dba',\n      title: '不限時！和朋友歡聚暢聊不設限',\n      link: '/tag?keyword=不限時',\n      show: true,\n    },\n    {\n      id: 'f70efa1f-df85-4f2b-83ee-24aeb3948396',\n      title: '最適合工作的咖啡廳清單',\n      link: '/tag?keyword=工作',\n      show: true,\n    },\n    {\n      id: 'e73418b4-b0f7-43bb-8381-355f2269900e',\n      title: '寶可夢補給站！休息，充電和 Wifi',\n      link: '/tag?keyword=寶可夢',\n      show: true,\n    },\n    {\n      id: 'bbd01354-88a2-4930-849e-66bf75c2d978',\n      title: '超值會員卡大集合，辦了絕對不後悔',\n      link: '/tag?keyword=會員卡',\n      show: true,\n    },\n    {\n      id: '0b664a52-fb2c-42e2-8e73-13e592ef6091',\n      title: '無限漫畫看到飽',\n      link: '/tag?keyword=漫畫雜誌',\n      show: true,\n    },\n    {\n      id: 'd91b94a8-7ff7-4377-b49b-1d9db14b51b4',\n      title: '一起看足球賽，超大電視螢幕、啤酒',\n      link: '/tag?keyword=運動酒吧',\n      show: true,\n    },\n    {\n      id: '056bfcdb-4b5c-4845-89b2-abfb0159cb2b',\n      title: '你也可以當網紅！來這裡拍照打卡',\n      link: '/tag?keyword=拍照打卡',\n      show: true,\n    },\n  ];\n\n  export const common = {\n    title: '吃什麼，どっち',\n  };\n\n  export const icon = {\n    onlineBooking: '線上訂位',\n    phoneBooking: '電話訂位',\n    navigation: '導航',\n    address: '地址',\n    phone: '電話',\n    openingHour: '營業時間',\n    price: '價格',\n    website: '網站',\n    hot: '熱門',\n    addFav: '加入我的最愛',\n    removeFav: '移除我的最愛'\n  };\n\n  export const features = {\n    twentyfourhr: '24 小時營業',\n    mrt: '捷運沿線',\n    noTimeLimit: '不限時',\n    parking: '附近有停車位',\n    socket: '提供插座',\n    takeout: '可外帶',\n    wifi: '免費 Wifi',\n    cashOnly: '只接受現金',\n    customService: '客製化服務',\n    family: '親子友善',\n    pet: '寵物友善',\n    pokemon: '有寶可夢補給站',\n  };\n\n  export const menu = [\n    {\n      id: 'fav',\n      title: '我的最愛',\n      icon: 'heart',\n      link: '/fav',\n      modalType: null,\n      needLogin: true,\n    },\n    {\n      id: 'register',\n      title: '註冊',\n      icon: 'star',\n      link: '#',\n      modalType: null,\n      needLogin: false,\n    },\n    {\n      id: 'login',\n      title: '登入',\n      icon: 'star',\n      link: '#',\n      modalType: 'login',\n      needLogin: false,\n    },\n    {\n      id: 'logout',\n      title: '登出',\n      icon: 'star',\n      link: '/',\n      modalType: '/',\n      needLogin: true,\n    },\n  ];","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { withCookies } from 'react-cookie';\nimport { Link, withRouter } from 'react-router-dom';\nimport {\n  Button,\n  FormControl,\n  FormErrorMessage,\n  FormLabel,\n  Input,\n  Modal,\n  ModalBody,\n  ModalCloseButton,\n  ModalContent,\n  ModalFooter,\n  ModalHeader,\n  ModalOverlay,\n} from \"@chakra-ui/core\";\nimport {\n  login,\n  logout,\n  restoreUserInfo,\n} from '../actions/index';\nimport { DOTCH_FOOD_COOKIE_KEY } from '../constants';\nimport {\n  common,\n  menu,\n} from '../data/data';\nimport '../styles/components/header.scss';\n\nconst MODAL_TYPE = {\n  LOGIN: 'login',\n}\n\nclass Header extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      account: null,\n      keyword: '',\n      modalType: null,\n      password: null,\n    };\n\n    this.onSeachHandler = this.onSeachHandler.bind(this);\n    this.onSearchInputChange = this.onSearchInputChange.bind(this);\n    this.renderLoginModal = this.renderLoginModal.bind(this);\n    this.renderMenuItems = this.renderMenuItems.bind(this);\n    this.renderMenuList = this.renderMenuList.bind(this);\n    this.renderSearchBox = this.renderSearchBox.bind(this);\n  }\n\n  componentDidMount() {\n    const { dispatch, cookies: { cookies } } = this.props;\n\n    // restore user info from cookie when reload page\n    if (cookies && cookies[DOTCH_FOOD_COOKIE_KEY]) {\n      dispatch(restoreUserInfo(JSON.parse(cookies[DOTCH_FOOD_COOKIE_KEY])));\n    } else {\n      dispatch(logout());\n    }\n  }\n\n  onSearchInputChange(keyword) {\n    this.setState({ keyword });\n  }\n\n  onAccountInputChange(account) {\n    this.setState({ account });\n  }\n\n  onPasswordInputChange(password) {\n    this.setState({ password });\n  }\n\n  onSeachHandler(e) {\n    if (e.key === 'Enter') {\n      const keyword = e.target.value;\n      this.props.history.push(`/tag/${keyword}`);\n    }\n  }\n\n  renderMenuList() {\n    return (\n      <div className=\"header__menu-list\">\n        {this.renderMenuItems()}\n      </div>\n    )\n  }\n\n  renderMenuItems() {\n    const { isLogin } = this.props.user;\n\n    return _.map(menu, (item) => {\n      return (\n        (isLogin === item.needLogin) &&\n        <div\n          key={item.title}\n          className=\"header__menu__item\"\n        >\n          <Link\n            to={item.link}\n            title={item.title}\n            className=\"header__menu__item__link\"\n            onClick={() => {\n              if (item.modalType === MODAL_TYPE.LOGIN) {\n                this.setState({ modalType: MODAL_TYPE.LOGIN });\n              } else if (item.id === 'logout') {\n                this.props.dispatch(logout());\n              }\n            }}\n          >\n            <span\n            title={item.title}\n            className={`header__menu__item__icon icon-${item.icon}`}\n            />\n            <span className=\"header__menu__item__title\">\n              {item.title}\n            </span>\n          </Link>\n        </div>\n      );\n    })\n  }\n\n  renderSearchBox() {\n    const { keyword } = this.state;\n\n    return (\n      <div className=\"header__searchbox\">\n        <input\n          className=\"header__search-input\"\n          placeholder=\"有什麼好吃的？\"\n          aria-label=\"有什麼好吃的？\"\n          value={keyword}\n          onChange={e => this.onSearchInputChange(e.target.value)}\n          onKeyPress={e => this.onSeachHandler(e)}\n        />\n        <button\n          type=\"button\"\n          className=\"header__searchbox__cancel\"\n          onClick={() => this.onSearchInputChange('')}\n        >\n          x\n        </button>\n      </div>\n    )\n  }\n\n  renderLoginModal() {\n    const { dispatch } = this.props;\n    const { modalType } = this.state;\n\n    return (\n      <Modal\n        isOpen={modalType === MODAL_TYPE.LOGIN}\n        onClose={() => { this.setState({modalType: null}); }}\n      >\n        <ModalOverlay />\n        <ModalContent>\n          <ModalHeader>Log On</ModalHeader>\n          <ModalCloseButton />\n          <ModalBody>\n            <FormControl>\n              <FormLabel htmlFor=\"account\">Account</FormLabel>\n              <Input\n                type=\"text\"\n                id=\"account\"\n                placeholder=\"Account\"\n                onChange={e => this.onAccountInputChange(e.target.value)}\n              />\n            </FormControl>\n            <FormControl>\n              <FormLabel htmlFor=\"password\">Password</FormLabel>\n              <Input\n                type=\"password\"\n                id=\"password\"\n                placeholder=\"Password\"\n                onChange={e => this.onPasswordInputChange(e.target.value)}\n              />\n            </FormControl>\n          </ModalBody>\n          <ModalFooter>\n            <Button\n              variant=\"ghost\"\n              onClick={() => {\n                const { account, password } = this.state;\n                const result = dispatch(login(account, password, () => {\n                  this.setState({ modalType: null })\n                }));\n              }}\n            >\n              Log On\n            </Button>\n          </ModalFooter>\n        </ModalContent>\n      </Modal>\n    )\n  }\n\n  render() {\n    const { modalType } = this.state;\n\n    return (\n      <div className=\"header\">\n        <div className=\"header__nav\">\n          <Link to=\"/\" title={common.title}>\n            <i\n              className=\"header__logo icon-logo\"\n              aria-label={common.title}\n            />\n          </Link>\n          <Link\n            to=\"/\"\n            className=\"header__title\"\n            title={common.title}\n          >\n            { common.title }\n          </Link>\n        </div>\n          {this.renderSearchBox()}\n          {this.renderMenuList()}\n          {this.renderLoginModal()}\n          {modalType === MODAL_TYPE.LOGON && this.renderLoginModal()}\n      </div>\n    );\n  }\n}\n\nexport default withRouter(withCookies(connect(state => state)(Header)));\n","import _ from 'lodash';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport '../styles/components/tag_list.scss';\n\nconst TagList = ({ tags }) => {\n  return (\n    <div className=\"tag-list\">\n      {\n        _.map(tags, (item) => {\n          return (\n            <div\n              key={item.id}\n              className=\"tag-list__item\"\n            >\n              <Link\n                to={`/tag/${item.tag}`}\n                title={item.title}\n                className=\"tag-list__item__link\"\n                >\n                  <span\n                    title={item.title}\n                    className={`tag-list__item__icon icon-${item.className}`}\n                  />\n                  <span className=\"tag-list__item__title\">\n                    {item.title}\n                  </span>\n              </Link>\n            </div>\n          );\n        })\n      }\n    </div>\n  );\n};\n\nTagList.propTypes = {\n  tags: PropTypes.array.isRequired,\n};\n\nexport default TagList;\n","import _ from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport TagList from './tag_list';\nimport '../styles/components/footer.scss';\n\nconst Footer = ({ categories, topics }) => {\n  return (\n    <div className=\"app-container footer\">\n      <div className=\"footer__column footer__column-2x\">\n        <h2 className=\"footer__heading\">\n          分類\n        </h2>\n        <TagList tags={categories} />\n      </div>\n      <div className=\"footer__column\">\n        <h2 className=\"footer__heading\">\n          熱門討論\n        </h2>\n        <div className=\"align-row footer__hot-topic\">\n          <ul className=\"unordered-list-circle\">\n            {\n              _.map(topics, (item) => {\n                return (\n                  <li key={item.id}>\n                    <Link to={item.link} title={item.title}>\n                      {item.title}\n                    </Link>\n                  </li>\n                );\n              })\n            }\n          </ul>\n        </div>\n      </div>\n      <div className=\"footer__column\">\n        <h2 className=\"footer__heading\">\n          關於「吃什麼，どっち」\n        </h2>\n        <ul className=\"unordered-list-circle\">\n          <li>\n            <a\n              title=\"什麼是「吃什麼，どっち」？\"\n              href=\"https://cythilya.github.io/2015/02/02/dotchi/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              什麼是「吃什麼，どっち」？\n            </a>\n          </li>\n          <li>\n            <a\n              title=\"聯絡我們\"\n              href=\"mailto:cythilya@gmail.com\"\n            >\n              聯絡我們\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nFooter.propTypes = {\n  categories: PropTypes.array.isRequired,\n  topics: PropTypes.array.isRequired,\n};\n\nexport default Footer;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { withCookies } from 'react-cookie';\nimport { withRouter } from 'react-router-dom';\nimport Newsticker from 'react-newsticker';\nimport Header from './header';\nimport Footer from './footer';\nimport TagList from './tag_list';\nimport { DOTCH_FOOD_COOKIE_KEY } from '../constants';\nimport  {\n  categories,\n  hotCategories,\n  hotTopics,\n  news,\n} from '../data/data';\nimport '../styles/index.scss';\n\nclass Page extends Component {\n  componentDidMount() {\n    const { dispatch, cookies: { cookies } } = this.props;\n    // restore user info from cookie when reload page\n    if (!cookies || !cookies[DOTCH_FOOD_COOKIE_KEY]) {\n      this.props.history.push(`/`);\n    }\n  }\n\n  render() {\n    const { id } = this.props;\n    const reverse = id === 'index' ? 'app-container--reverse' : '';\n\n    return (\n      <div>\n        <Header />\n        <div className=\"newsticker\">\n          <Newsticker news={news} />\n        </div>\n        <div className={`app-container ${reverse}`}>\n          <div className=\"app-main-content\">\n            { this.props.children }\n          </div>\n          <div className=\"app-menu\">\n            <div className=\"panel\">\n              <h1 className=\"panel__main-heading mb-1x\">\n                熱門主題\n              </h1>\n              <TagList tags={hotCategories} />\n            </div>\n          </div>\n        </div>\n        <Footer categories={categories} topics={hotTopics} />\n      </div>\n    );\n  }\n}\n\nPage.propTypes = {\n  id: PropTypes.string.isRequired,\n};\n\nexport default withRouter(withCookies(connect(state => state)(Page)));\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { icon as iconData } from '../data/data';\nimport '../styles/components/store_control_button.scss';\n\nconst StoreControlButtons = ({ store }) => {\n  return (\n    <div className=\"store-control-buttons\">\n      { store.booking.phone\n        && (\n        <Link\n          to={`tel:${store.booking.phone}`}\n          title={iconData.phoneBooking}\n          className=\"button\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <span\n            className=\"store-control-buttons__icon icon-phone-white\"\n            title={iconData.phoneBooking}\n          />\n          <span className=\"button-with-line-breaks-text\">\n            {iconData.phoneBooking}\n          </span>\n        </Link>\n        )\n      }\n      { store.booking.online\n        && (\n        <Link\n          to={`${store.booking.online}`}\n          title={iconData.onlineBooking}\n          className=\"button\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n        <span\n          className=\"store-control-buttons__icon icon-online-booking\"\n          title={iconData.onlineBooking}\n        />\n        <span className=\"button-with-line-breaks-text\">\n          {iconData.onlineBooking}\n        </span>\n        </Link>\n        )\n      }\n      <Link\n        to={`https://www.google.com.tw/maps/search/${store.location.address}`}\n        title={iconData.navigation}\n        className=\"button\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n      <span\n        className=\"store-control-buttons__icon icon-pin-on-map\"\n        title={iconData.navigation}\n      />\n      <span className=\"button-with-line-breaks-text short-word\">\n        {iconData.navigation}\n      </span>\n      </Link>\n    </div>\n  );\n};\n\nStoreControlButtons.propTypes = {\n  store: PropTypes.object.isRequired,\n};\n\nexport default StoreControlButtons;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport LazyLoad from 'react-lazyload';\nimport StoreControlButtons from './store_control_button';\nimport { icon as iconData } from '../data/data';\nimport '../styles/components/card.scss';\n\nclass Card extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isChangeFavStatus: false,\n      isFavorite: false,\n    };\n\n    this.handleAddFavList = this.handleAddFavList.bind(this);\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { isFavorite: preIsFavorite } = prevState;\n    const { isFavorite } = this.state;\n\n    if (preIsFavorite !== isFavorite) {\n      this.setState({ isChangeFavStatus: true }, () => {\n        setTimeout(() => {\n          this.setState({ isChangeFavStatus: false });\n        }, 300);\n      });\n    }\n  }\n\n  handleAddFavList() {\n    const {\n      addFavList,\n      store,\n      userID,\n    } = this.props;\n    const { isFavorite: isFavoriteState } = this.state;\n\n    addFavList({ store, userID });\n    this.setState({isFavorite: !isFavoriteState});\n  }\n\n  render() {\n    const { store } = this.props;\n    const { isFavorite, isChangeFavStatus } = this.state;\n    const title = isFavorite ? iconData.removeFav : iconData.addFav;\n    const iconStyle = isFavorite ? 'icon-heart-full' : 'icon-heart-empty';\n    const flashStyle = isChangeFavStatus ? 'clicked' : '';\n\n    return (\n      <div\n        className=\"card\"\n        key={store.id}\n      >\n        <a\n          title={title}\n          className={`card__fav-button button--transparent ${flashStyle}`}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          onClick={this.handleAddFavList}\n        >\n          <span\n            className={`card__fav-icon ${iconStyle}`}\n            title={title}\n          />\n        </a>\n        <LazyLoad offsetVertical={100}>\n          <figure>\n            <picture>\n              <source\n                media=\"(min-width: 1080px)\"\n                srcSet={`${store.image[6].url} 1x, ${store.image[8].url} 2x`}\n                type=\"image/webp\"\n              />\n              <source\n                media=\"(min-width: 1080px)\"\n                srcSet={`${store.image[2].url}} 1x, ${store.image[4].url} 2x`}\n                type=\"image/jpeg\"\n              />\n              <source\n                media=\"(min-width: 840px)\"\n                srcSet={`${store.image[5].url}} 1x, ${store.image[6].url} 2x`}\n                type=\"image/webp\"\n              />\n              <source\n                media=\"(min-width: 840px)\"\n                srcSet={`${store.image[1].url}} 1x, ${store.image[2].url} 2x`}\n                type=\"image/jpeg\"\n              />\n              <source\n                media=\"(min-width: 768px)\"\n                srcSet={`${store.image[6].url} 1x, ${store.image[8].url} 2x`}\n                type=\"image/webp\"\n              />\n              <source\n                media=\"(min-width: 768px)\"\n                srcSet={`${store.image[2].url} 1x, ${store.image[4].url} 2x`}\n                type=\"image/jpeg\"\n              />\n              <source\n                media=\"(min-width: 568px)\"\n                srcSet={`${store.image[6].url} 1x, ${store.image[8].url} 2x`}\n                type=\"image/webp\"\n              />\n              <source\n                media=\"(min-width: 568px)\"\n                srcSet={`${store.image[2].url} 1x, ${store.image[4].url} 2x`}\n                type=\"image/jpeg\"\n              />\n              <source\n                media=\"(min-width: 375px)\"\n                srcSet={store.image[7].url}\n                type=\"image/webp\"\n              />\n              <source\n                media=\"(min-width: 375px)\"\n                srcSet={store.image[3].url}\n                type=\"image/jpeg\"\n              />\n              <source\n                media=\"(min-width: 320px)\"\n                srcSet={`${store.image[6].url} 1x, ${store.image[8].url} 2x`}\n                type=\"image/webp\"\n              />\n              <source\n                media=\"(min-width: 320px)\"\n                srcSet={`${store.image[2].url} 1x, ${store.image[4].url} 2x`}\n                type=\"image/jpeg\"\n              />\n              <source\n                media=\"(man-width: 319px)\"\n                srcSet={`${store.image[5].url} 1x, ${store.image[6].url} 2x`}\n                type=\"image/webp\"\n              />\n              <source\n                media=\"(man-width: 319px)\"\n                srcSet={`${store.image[1].url} 1x, ${store.image[2].url} 2x`}\n                type=\"image/jpeg\"\n              />\n              <img\n                className=\"card__image\"\n                src={store.image[4].url}\n                alt={store.name}\n              />\n            </picture>\n            <figcaption className=\"hide\">\n              {store.name}\n            </figcaption>\n          </figure>\n        </LazyLoad>\n        <div className=\"card__container\">\n          <h2 className=\"card__title\">\n            <Link to={`/store/${store.id}`} title={store.name}>\n              {store.name}\n            </Link>\n          </h2>\n          <div className=\"card__tag-list\">\n            {\n              store.tags.map((item) => {\n                return (\n                  <div key={item} className=\"card__tag-item\">\n                    <Link to={`/tag/${item}`} title={item} className=\"card__tag-link\">\n                      {item}\n                    </Link>\n                  </div>\n                );\n              })\n            }\n          </div>\n          <StoreControlButtons store={store} />\n        </div>\n      </div>\n    );\n  }\n}\n\nCard.propTypes = {\n  store: PropTypes.object.isRequired,\n};\n\nexport default Card;\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport Page from '../components/page';\nimport Card from '../components/card';\n\nimport {\n  addFavList,\n  fetchHotStoreList,\n  fetchNearbyStoreList,\n  fetchRecommendStoreList,\n} from '../actions/index';\n\nclass Index extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderCards = this.renderCards.bind(this);\n  }\n\n  componentDidMount() {\n    const { dispatch } = this.props;\n\n    dispatch(fetchNearbyStoreList());\n    dispatch(fetchRecommendStoreList());\n    dispatch(fetchHotStoreList());\n  }\n\n  renderCards(stores) {\n    const { dispatch } = this.props;\n    return _.map(stores, (store) => <Card key={store.id} store={store} addFavList={(args) => {dispatch(addFavList(args))}} />);\n  };\n\n  render() {\n    const {\n      hotStoresData,\n      nearbyStoresData,\n      recommendStoresData,\n    } = this.props.filteredStores;\n\n    return (\n      <Page title=\"首頁\" id=\"index\">\n        <div className=\"panel\">\n          <h1 className=\"panel__main-heading\">\n            離我最近\n            <span className=\"panel__heading-deco icon-pin-map\" />\n          </h1>\n          <Link\n            to=\"/nearby\"\n            className=\"panel__view-more\"\n            title=\"看更多-離我最近\"\n          >\n            看更多\n          </Link>\n          <div className=\"card-list\">\n            { this.renderCards(nearbyStoresData) }\n          </div>\n        </div>\n        <div className=\"panel\">\n          <h1 className=\"panel__main-heading\">\n            猜你想吃\n          </h1>\n          <Link to=\"/nearby\" className=\"panel__view-more\" title=\"看更多-猜你想吃\">\n            看更多\n          </Link>\n          <div className=\"card-list\">\n            { this.renderCards(recommendStoresData) }\n          </div>\n        </div>\n        <div className=\"panel\">\n          <h1 className=\"panel__main-heading\">\n            熱門推薦\n            <span className=\"panel__heading-deco icon-star\" />\n          </h1>\n          <Link to=\"/nearby\" className=\"panel__view-more\" title=\"看更多-熱門推薦\">\n            看更多\n          </Link>\n          <div className=\"card-list\">\n            { this.renderCards(hotStoresData) }\n          </div>\n        </div>\n      </Page>\n    );\n  }\n}\n\nIndex.propTypes = {\n  hotStoresData: PropTypes.array,\n  nearbyStoresData: PropTypes.array,\n  recommendStoresData: PropTypes.array,\n};\n\nIndex.defaultProps = {\n  hotStoresData: [],\n  nearbyStoresData: [],\n  recommendStoresData: [],\n};\n\nexport default connect(state => state)(Index);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { features as featureData } from '../data/data';\nimport '../styles/components/feature_list.scss';\n\nconst FeatureList = ({ features }) => {\n  const {\n    cashOnly,\n    customService,\n    family,\n    mrt,\n    noTimeLimit,\n    pokemon,\n    parking,\n    pet,\n    socket,\n    takeout,\n    twentyfourhr,\n    wifi,\n  } = features;\n\n  return (\n    <div className=\"feature-list\">\n      { twentyfourhr\n        && (\n        <span\n          title={featureData.twentyfourhr}\n          className=\"feature-list__icon icon-24-hours\"\n        />\n        )\n      }\n\n      { mrt\n        && (\n        <span\n          title={featureData.mrt}\n          className=\"feature-list__icon icon-train\"\n        />\n        )\n      }\n\n      { noTimeLimit\n        && (\n        <span\n          title={featureData.noTimeLimit}\n          className=\"feature-list__text\"\n        >\n            {featureData.noTimeLimit}\n        </span>\n        )\n      }\n\n      { parking\n        && (\n        <span\n          title={featureData.parking}\n          className=\"feature-list__icon icon-parking-yellow\"\n        />\n        )\n      }\n\n      { socket\n        && (\n        <span\n          title={featureData.socket}\n          className=\"feature-list__icon icon-plug\"\n        />\n        )\n      }\n\n      { takeout\n        && (\n        <span\n          title={featureData.takeout}\n          className=\"feature-list__icon icon-takeaway\"\n        />\n        )\n      }\n\n      {\n        wifi\n        && (\n        <span\n          title={featureData.wifi}\n          className=\"feature-list__icon icon-wifi\"\n        />\n        )\n      }\n\n      { cashOnly\n        && (\n        <span\n          title={featureData.cashOnly}\n          className=\"feature-list__icon icon-cash\"\n        />\n        )\n      }\n\n      { customService\n        && (\n        <span\n          title={featureData.customService}\n          className=\"feature-list__icon icon-pc-mechanic\"\n        />\n        )\n      }\n\n      { family\n        && (\n        <span\n          title={featureData.family}\n          className=\"feature-list__icon icon-baby-boy\"\n        />\n        )\n      }\n\n      { pet\n        && (\n        <span\n          title={featureData.pet}\n          className=\"feature-list__icon icon-pets\"\n        />\n        )\n      }\n\n      { pokemon\n        && (\n        <span\n          title={featureData.pokemon}\n          className=\"feature-list__icon icon-pokecoin\"\n        />\n        )\n      }\n\n    </div>\n  );\n};\n\nFeatureList.propTypes = {\n  features: PropTypes.object,\n};\n\nFeatureList.defaultProps = {\n  features: {},\n};\n\nexport default FeatureList;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst TabsNav = ({ nav, activeIndex, onClickTabNavHandler }) => {\n  const activeClass = nav.id === activeIndex ? 'selected' : '';\n\n  return (\n    <div\n      key={nav.title}\n      className={`tabs__nav__item ${activeClass}`}\n      title={nav.title}\n      onClick={() => onClickTabNavHandler(nav.id)}\n      onKeyDown={() => onClickTabNavHandler(nav.id)}\n    >\n      {nav.title}\n    </div>\n  );\n};\n\nTabsNav.propTypes = {\n  nav: PropTypes.object.isRequired,\n  onClickTabNavHandler: PropTypes.func.isRequired,\n  activeIndex: PropTypes.number.isRequired,\n};\n\nexport default TabsNav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst TabsPanel = ({ panel, activeIndex }) => {\n  const activeClass = panel.id === activeIndex ? 'selected' : '';\n\n  return (\n    <div\n      key={panel.title}\n      id={panel.hash}\n      className={`tabs__panel__item ${activeClass}`}\n    >\n      {panel.content}\n    </div>\n  );\n};\n\nTabsPanel.propTypes = {\n  panel: PropTypes.object.isRequired,\n  activeIndex: PropTypes.number.isRequired,\n};\n\nexport default TabsPanel;\n","import _ from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport TabsNav from './tabs_nav';\nimport TabsPanel from './tabs_panel';\nimport '../styles/components/tabs.scss';\n\nconst Tabs = ({ tabs, activeIndex, onClickTabNavHandler }) => {\n  return (\n    <div className=\"tabs\">\n      <div className=\"tabs__nav\">\n        {\n          _.map(tabs, (item) => {\n            const nav = {\n              id: item.id,\n              title: item.title,\n              hash: item.hash,\n            };\n\n            return (\n              <TabsNav key={item.title} nav={nav} activeIndex={activeIndex} onClickTabNavHandler={onClickTabNavHandler} />\n            );\n          })\n        }\n      </div>\n      <div className=\"tab__panel\">\n        {\n          _.map(tabs, (item) => {\n            const panel = {\n              id: item.id,\n              title: item.title,\n              hash: item.hash,\n              content: item.content,\n            };\n\n            return (\n              <TabsPanel key={item.title} activeIndex={activeIndex} panel={panel} />\n            );\n          })\n        }\n      </div>\n    </div>\n  );\n};\n\nTabs.propTypes = {\n  tabs: PropTypes.array.isRequired,\n  onClickTabNavHandler: PropTypes.func.isRequired,\n  activeIndex: PropTypes.number.isRequired,\n};\n\nexport default Tabs;\n","import _ from 'lodash';\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport '../styles/components/store_comments.scss';\n\nconst StoreComments = ({ comments }) => {\n  const commentList = comments[0].comments || [];\n\n  return (\n    <div className=\"store-comments\">\n      {\n        _.map(commentList, (item) => {\n          const { user, content } = item;\n\n          return (\n            <div\n              key={item.id}\n              className=\"store-comments__item\"\n            >\n              <div className=\"store-comments__item__user-image icon-kitty\" />\n              <div className=\"store-comments__item__detail\">\n                <div className=\"store-comments__item__user-name\">\n                  {user}\n                </div>\n                <div className=\"store-comments__item__content\">\n                  {content}\n                </div>\n              </div>\n            </div>\n          );\n        })\n      }\n    </div>\n  );\n};\n\nStoreComments.propTypes = {\n  comments: PropTypes.array,\n};\n\nStoreComments.defaultProps = {\n  comments: [],\n};\n\nexport default StoreComments;\n","import React, { Component } from 'react';\nimport { Field, reduxForm } from 'redux-form';\nimport PropTypes from 'prop-types';\nimport '../styles/components/form.scss';\nimport '../styles/components/alert.scss';\nimport '../styles/components/store_info.scss';\nimport '../styles/components/comment_form.scss';\n\nconst required = value => value ? undefined : '必填'\n\nconst renderTextField = ({ input, placeholder, autocomplete, meta: { touched, error, warning } }) => {\n  return (\n    <div>\n      <input\n        {...input}\n        type=\"text\"\n        className=\"form__input-text\"\n        placeholder={placeholder}\n        autocomplete={autocomplete}\n      />\n      {touched\n        && ((error\n        && (\n        <span className=\"form__error\">\n          {error}\n        </span>)\n        )\n        || (warning\n        && (\n        <span className=\"form__warning\">\n          {warning}\n        </span>\n        )\n        ))\n      }\n    </div>\n  );\n};\n\nconst renderSelectField = ({ input, label, type, meta: { touched, error }, children }) => (\n  <div>\n    <select {...input} className=\"form__select\">\n      {children}\n    </select>\n    {touched && error && <span className=\"form__error\">{error}</span>}\n  </div>\n);\n\nclass CommentDataForm extends Component {\n  constructor(props) {\n    super(props);\n\n    const {\n      id,\n      storeid,\n      closeForm,\n      isFormValid,\n      resetFormStatus,\n      handleSubmit,\n      pristine,\n      reset,\n      submitting,\n      handleSubmitFail,\n    } = props;\n  }\n\n  render() {\n    const {\n      id,\n      storeid,\n      closeForm,\n      isFormValid,\n      resetFormStatus,\n      handleSubmit,\n      pristine,\n      reset,\n      submitting,\n      handleSubmitFail,\n    } = this.props;\n\n    const showForm = isFormValid !== 2 ? '' : 'hide';\n    const showErrMsg = !isFormValid ? '' : 'hide';\n    const showSuccessMsg = isFormValid === 2 ? '' : 'hide';\n\n    return (\n      <div className=\"comment-form\">\n        <div className={showForm}>\n          <div className=\"comment-form__main-title\">\n            <h1 className=\"form__main-heading mb-2x\">\n              我要給評價！\n            </h1>\n            <i\n              className=\"comment-form__close\"\n              onClick={closeForm}\n              onKeyDown={closeForm}\n            >\n              X\n            </i>\n          </div>\n          <form\n            className=\"form form-store-info\"\n            onSubmit={handleSubmit}\n            onSubmitFail={handleSubmitFail}\n          >\n            <div className=\"form__block\">\n              <div className=\"form__group\">\n                <label\n                  className=\"form__label\"\n                  htmlFor=\"user\"\n                >\n                  暱稱\n                </label>\n                <div className=\"form__field\">\n                  <Field\n                    type=\"text\"\n                    component={renderTextField}\n                    id=\"user\"\n                    name=\"user\"\n                    placeholder=\"請問您的大名是？\"\n                    className=\"form__input-text\"\n                    validate={[required]}\n                  />\n                </div>\n              </div>\n              <div className=\"form__group\">\n                <label\n                  className=\"form__label\"\n                  htmlFor=\"rating\"\n                >\n                  評等\n                </label>\n                <div className=\"form__field\">\n                  <Field\n                    component={renderSelectField}\n                    id=\"rating\"\n                    name=\"rating\"\n                    validate={[required]}\n                  >\n                    <option value=\"\" disabled>\n                      請選擇評等\n                    </option>\n                    <option value=\"5\">\n                      5 星級！真是太棒了 (撒花)\n                    </option>\n                    <option value=\"4\">\n                      4 顆星！很好的體驗！\n                    </option>\n                    <option value=\"3\">\n                      3 顆星，還可以摟！\n                    </option>\n                    <option value=\"2\">\n                      2 顆星，普普通通 XD\n                    </option>\n                    <option value=\"1\">\n                      1 顆星，有待加強\n                    </option>\n                  </Field>\n                </div>\n              </div>\n              <div className=\"form__group\">\n                <label\n                  className=\"form__label\"\n                  htmlFor=\"meal\"\n                >\n                  餐別\n                </label>\n                <div className=\"form__field\">\n                  <Field\n                    component={renderSelectField}\n                    id=\"meal\"\n                    name=\"meal\"\n                    validate={[required]}\n                  >\n                    <option value=\"\" disabled>\n                      請選擇餐別\n                    </option>\n                    <option value=\"breakfast\">\n                      早餐\n                    </option>\n                    <option value=\"brunch\">\n                      早午餐\n                    </option>\n                    <option value=\"lunch\">\n                      午餐\n                    </option>\n                    <option value=\"afternoontea\">\n                      下午茶\n                    </option>\n                    <option value=\"dinner\">\n                      晚餐\n                    </option>\n                    <option value=\"midnightsnack\">\n                      宵夜\n                    </option>\n                    <option value=\"other\">\n                      其他\n                    </option>\n                  </Field>\n                </div>\n              </div>\n              <div className=\"form__group\">\n                <label\n                  className=\"form__label\"\n                  htmlFor=\"date\"\n                >\n                  用餐日期\n                </label>\n                <div className=\"form__field\">\n                  <Field\n                    type=\"text\"\n                    component=\"input\"\n                    id=\"date\"\n                    name=\"date\"\n                    placeholder=\"yyyy/mm/dd\"\n                    className=\"form__input-text\"\n                    validate={[required]}\n                  />\n                </div>\n              </div>\n              <div className=\"form__group\">\n                <label\n                  htmlFor=\"content\"\n                  className=\"form__label\"\n                >\n                  內容\n                </label>\n                <div className=\"form__field\">\n                  <Field\n                    type=\"text\"\n                    component={renderTextField}\n                    id=\"content\"\n                    name=\"content\"\n                    placeholder=\"想說什麼呢？\"\n                    className=\"form__input-text\"\n                    validate={[required]}\n                  />\n                </div>\n              </div>\n              <Field\n                type=\"text\"\n                component=\"input\"\n                name=\"docid\"\n                value={id}\n                className=\"hide\"\n              />\n              <Field\n                type=\"text\"\n                component=\"input\"\n                name=\"id\"\n                value={storeid}\n                className=\"hide\"\n              />\n            </div>\n            <div className=\"form__button-group\">\n              <button\n                type=\"submit\"\n                disabled={pristine || submitting}\n                className=\"button\"\n              >\n                提交\n              </button>\n            </div>\n          </form>\n        </div>\n        <div className={`${showErrMsg}`}>\n          <div className=\"alert alert--danger\">\n            <div className=\"alert--icon\">\n              &#x02717;\n            </div>\n            <div className=\"alert--content\">\n              嗚嗚出錯了，請重新再試一次\n            </div>\n          </div>\n        </div>\n        <div className={showSuccessMsg}>\n          <div className=\"alert alert--success\">\n            <div className=\"alert--icon\">\n              &#x02713;\n            </div>\n            <div className=\"alert--content\">\n              感謝您的意見！資料審核需約一週，請耐心等候。審核通過就會出現在頁面上！\n            </div>\n          </div>\n          <div className=\"form__button-group\">\n            <button\n              type=\"button\"\n              onClick={() => {\n                reset();\n                resetFormStatus(1);\n                closeForm(1);\n              }}\n              className=\"button--default\"\n            >\n              點我關閉\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nCommentDataForm.propTypes = {\n  id: PropTypes.string.isRequired,\n  storeid: PropTypes.string.isRequired,\n  closeForm: PropTypes.func.isRequired,\n  isFormValid: PropTypes.number.isRequired,\n  resetFormStatus: PropTypes.func.isRequired,\n  handleSubmit: PropTypes.func.isRequired,\n  pristine: PropTypes.bool.isRequired,\n  reset: PropTypes.func.isRequired,\n  submitting: PropTypes.bool.isRequired,\n  handleSubmitFail: PropTypes.func.isRequired,\n};\n\nCommentDataForm.defaultProps = {};\n\nexport default reduxForm({\n  form: 'commentData',\n})(CommentDataForm);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { change } from 'redux-form';\nimport StoreComments from './store_comments';\nimport CommentDataForm from './comment_form';\nimport '../styles/components/store_review.scss';\nimport {\n  saveCommentData,\n  insertCommentData,\n} from '../actions/index';\n\nclass StoreReview extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpenReviewForm: false,\n      isFormValid: 1, // 0: error, 1: initial, 2: success\n    };\n\n    this.renderStoreComments = this.renderStoreComments.bind(this);\n    this.enableCommentForm = this.enableCommentForm.bind(this);\n    this.handleFormSubmit = this.handleFormSubmit.bind(this);\n    this.handleSubmitFail = this.handleSubmitFail.bind(this);\n    this.resetFormStatus = this.resetFormStatus.bind(this);\n    this.closeStoreCommentForm = this.closeStoreCommentForm.bind(this);\n  }\n\n  componentDidMount() {\n    const { dispatch, comments, storeid } = this.props;\n    dispatch(change('commentData', 'docid', comments.id));\n    dispatch(change('commentData', 'id', storeid));\n  }\n\n  componentDidUpdate(prevProps) {\n    const { dispatch, comments, storeid } = this.props;\n\n    if (comments.id !== prevProps.comments.id) {\n      dispatch(change('commentData', 'docid', comments.id));\n    }\n\n    if (storeid !== prevProps.storeid) {\n      dispatch(change('commentData', 'id', storeid));\n    }\n  }\n\n  enableCommentForm() {\n    this.setState({ isOpenReviewForm: true });\n  }\n\n  handleFormSubmit(values) {\n    const { dispatch, comments } = this.props;\n\n    if (comments.id) {\n      dispatch(saveCommentData(values)).then(() => {\n        this.setState({ isFormValid: 2 });\n      });\n    } else {\n      dispatch(insertCommentData(values)).then(() => {\n        this.setState({ isFormValid: 2 });\n      });\n    }\n  }\n\n  handleSubmitFail() {\n    this.setState({ isFormValid: 0 });\n  }\n\n  resetFormStatus(status) {\n    this.setState({ isFormValid: status });\n  }\n\n  closeStoreCommentForm() {\n    this.setState({\n      isOpenReviewForm: false,\n      isFormValid: 1,\n    });\n  }\n\n  renderStoreComments(commentInfo, storeid) {\n    const { isOpenReviewForm, isFormValid } = this.state;\n    const comments = commentInfo.commentList || [];\n    const commentList = comments.length > 0 ? <StoreComments comments={comments} /> : <div className=\"store-info__no-comments\">暫無評價!</div>;\n    return (\n      <div>\n        { isOpenReviewForm\n          && (\n            <CommentDataForm\n              id={commentInfo.id}\n              storeid={storeid}\n              isFormValid={isFormValid}\n              onSubmit={this.handleFormSubmit}\n              onSubmitFail={this.handleSubmitFail}\n              closeForm={this.closeStoreCommentForm}\n              resetFormStatus={this.resetFormStatus}\n            />\n          )\n        }\n        { commentList }\n      </div>\n    );\n  }\n\n  render() {\n    const { comments, storeid } = this.props;\n\n    return (\n      <div className=\"store-review\">\n        <div className=\"store-review__control\">\n          <div>\n            想說什麼嗎？\n            <span\n              className=\"store-review__feedback\"\n              onClick={this.enableCommentForm}\n              onKeyDown={this.enableCommentForm}\n            >\n              點這裡\n            </span>\n            給評價！\n          </div>\n        </div>\n        { this.renderStoreComments(comments, storeid) }\n      </div>\n    );\n  }\n}\n\n\nStoreReview.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  comments: PropTypes.object,\n  storeid: PropTypes.string.isRequired,\n};\n\nStoreReview.defaultProps = {\n  comments: {},\n};\n\nexport default connect(state => state)(StoreReview);\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport LazyLoad from 'react-lazyload';\nimport StoreControlButtons from './store_control_button';\nimport FeatureList from './feature_list';\nimport Tabs from './tabs';\nimport StoreReview from './store_review';\nimport { icon as iconData } from '../data/data';\nimport '../styles/components/store_info.scss';\n\nclass StoreInfo extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { index: 0 };\n    this.onClickHandler = this.onClickHandler.bind(this);\n    this.renderStoreInfo = this.renderStoreInfo.bind(this);\n    this.renderStoreComments = this.renderStoreComments.bind(this);\n  }\n\n  onClickHandler(index) {\n    this.setState({ index });\n  }\n\n  renderStoreInfo(store) {\n    return (\n      <div>\n        <ul className=\"store-info__detail\">\n          <li className=\"store-info__detail__item\">\n            <i\n              className=\"store-info__detail__item__icon icon-pin-map\"\n              title={iconData.address}\n            />\n            <a\n              title={iconData.navigation}\n              href={`https://www.google.com.tw/maps/search/${store.location.address}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {store.location.address}\n            </a>\n          </li>\n          <li className=\"store-info__detail__item\">\n            <i\n              className=\"store-info__detail__item__icon icon-phone\"\n              title={iconData.phone}\n            />\n            <a\n              title={iconData.phone}\n              href={`${store.phone}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {store.phone}\n            </a>\n          </li>\n          <li className=\"store-info__detail__item\">\n            <i\n              className=\"store-info__detail__item__icon icon-clock-circular-outline\"\n              title={iconData.openingHour}\n            />\n            {store.openingHour.start}\n            ~\n            {store.openingHour.end}\n          </li>\n          <li className=\"store-info__detail__item\">\n            <i\n              className=\"store-info__detail__item__icon icon-dollar\"\n              title={iconData.price}\n            />\n            {store.price.lowest}\n            ~\n            {store.price.highest}\n          </li>\n          <li className=\"store-info__detail__item\">\n            <i\n              className=\"store-info__detail__item__icon icon-global\"\n              title={iconData.website}\n            />\n            <a\n              title={store.name}\n              href={`${store.sns.website}`}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              {store.name}\n            </a>\n          </li>\n        </ul>\n        { store.features && <FeatureList features={store.features} /> }\n        <div className=\"store-info__tag-list\">\n          {\n            store.tags.map((item) => {\n              return (\n                <div key={item} className=\"store-info__tag-item\">\n                  <Link\n                    to={`/tag/${item}`}\n                    className=\"store-info__tag-link\"\n                    title={item}\n                  >\n                    {item}\n                  </Link>\n                </div>\n              );\n            })\n          }\n        </div>\n      </div>\n    )\n  }\n\n  renderStoreComments(comments, storeid) {\n    return <StoreReview comments={comments} storeid={storeid} />;\n  }\n\n  render() {\n    const { store, comments } = this.props;\n    const { index } = this.state;\n    const tabs = [\n      {\n        id: 0,\n        title: '資訊',\n        hash: 'info',\n        content: this.renderStoreInfo(store),\n      },\n      {\n        id: 1,\n        title: '評價',\n        hash: 'comment',\n        content: this.renderStoreComments(comments, store.id),\n      },\n    ];\n    const boxStyle = {\n      background: '#e8e8e8',\n      width: '175px',\n      height: '175px',\n    };\n\n    return (\n      <div>\n        <div\n          key={store.id}\n          className=\"store-info\"\n        >\n          <div className=\"store-info__image\" style={boxStyle}>\n            <LazyLoad offsetVertical={100} height={175}>\n              <figure>\n                <picture>\n                  <source\n                    media=\"all\"\n                    srcSet={`${store.image[5].url} 1x, ${store.image[6].url} 2x`}\n                    type=\"image/webp\"\n                  />\n                  <source\n                    media=\"all\"\n                    srcSet={`${store.image[1].url} 1x, ${store.image[2].url} 2x`}\n                    type=\"image/jpeg\"\n                  />\n                  <img src={store.image[1].url} alt={store.name} />\n                </picture>\n                <figcaption className=\"hide\">\n                  {store.name}\n                </figcaption>\n              </figure>\n            </LazyLoad>\n            {/* <div className=\"store-info__image-list\">\n              <img alt=\"OOO\" src=\"https://dummyimage.com/50x50/666/fff\" className=\"store-info__image-list__item\" />\n              <img alt=\"OOO\" src=\"https://dummyimage.com/50x50/000/fff\" className=\"store-info__image-list__item\" />\n              <img alt=\"OOO\" src=\"https://dummyimage.com/50x50/666/fff\" className=\"store-info__image-list__item\" />\n              <img alt=\"OOO\" src=\"https://dummyimage.com/50x50/000/fff\" className=\"store-info__image-list__item\" />\n              <img alt=\"OOO\" src=\"https://dummyimage.com/50x50/666/fff\" className=\"store-info__image-list__item\" />\n              <img alt=\"OOO\" src=\"https://dummyimage.com/50x50/000/fff\" className=\"store-info__image-list__item\" />\n            </div> */}\n          </div>\n          <div className=\"store-info__container\">\n            <div className=\"store-info__content\">\n              {store.description}\n              <StoreControlButtons store={store} />\n            </div>\n            <Tabs tabs={tabs} activeIndex={index} onClickTabNavHandler={this.onClickHandler} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nStoreInfo.propTypes = {\n  store: PropTypes.object.isRequired,\n  comments: PropTypes.object,\n};\n\nStoreInfo.defaultProps = {\n  comments: {},\n};\n\nexport default StoreInfo;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport { Link } from 'react-router-dom';\nimport Card from './card';\nimport { fetchRecommendStoreList } from '../actions';\n\nclass Notfound extends Component {\n  componentDidMount() {\n    const { dispatch } = this.props;\n    dispatch(fetchRecommendStoreList());\n  }\n\n  renderCards(recommendStoresData) {\n    return _.map(recommendStoresData, (store) => {\n      return (\n        <Card key={store.id} store={store} ref={this.card} />\n      );\n    });\n  };\n\n  render() {\n    const { tags } = this.props;\n    const { filteredStores: { recommendStoresData } } = this.props;\n\n    return (\n      <div>\n        <h1 className=\"panel__main-heading\">\n          找不到！\n        </h1>\n        <Link to=\"/\" title=\"回「吃什麼」首頁\">\n          回首頁\n        </Link>\n        或看熱門關鍵字\n        <Link to={`/tag/${tags[0]}`} title={tags[0]}>\n          {tags[0]}\n        </Link>\n        、\n        <Link to={`/tag/${tags[1]}`} title={tags[1]}>\n          {tags[1]}\n        </Link>\n        、\n        <Link to={`/tag/${tags[2]}`} title={tags[2]}>\n          {tags[2]}\n        </Link>\n        <hr />\n        <div className=\"mt-2x\">\n          <h1 className=\"panel__main-heading\">\n          猜你想吃\n          </h1>\n          <div className=\"card-list\">\n            {this.renderCards(recommendStoresData)}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\n\nNotfound.propTypes = {\n  tags: PropTypes.array.isRequired,\n  filteredStores: PropTypes.object,\n};\n\nNotfound.defaultProps = {\n  filteredStores: null,\n};\n\nexport default connect(state => state)(Notfound);\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Link, withRouter } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport Page from '../components/page';\nimport StoreInfo from '../components/store_info';\nimport Notfound from '../components/not_found';\nimport { hotTags } from '../data/data';\nimport {\n  fetchStoreInfo,\n  fetchStoreComments,\n} from '../actions/index';\n\nconst renderNotFound = () => {\n  return (<Notfound tags={hotTags.slice(0, 3)} />);\n};\n\nconst renderLoading = () => {\n  return (\n    <div className=\"icon-loading store-item__loading\" />\n  );\n};\n\nclass Store extends Component {\n  componentDidMount() {\n    const { dispatch, router } = this.props;\n    const { id } = this.props.match.params;\n    dispatch(fetchStoreInfo(id));\n    dispatch(fetchStoreComments(id));\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      dispatch,\n      match: { params: { id }},\n    } = this.props;\n\n    if (id !== prevProps.match.params.id) {\n      dispatch(fetchStoreInfo(id));\n      dispatch(fetchStoreComments(id));\n    }\n  }\n\n  render() {\n    const { store, storeComments } = this.props;\n    const isNotFound = _.isEmpty(store);\n    const isLoading = _.isObject(store) && _.isEmpty(store);\n\n    return (\n      <Page title=\"商店單頁\" id=\"store\">\n        <div className=\"panel\">\n          { !isNotFound\n          && (\n            <div>\n              <h1 className=\"panel__main-heading mb-2x\">\n                <Link to={`/store/${store.id}`} title={store.name}>\n                  {store.name}\n                </Link>\n              </h1>\n              <StoreInfo store={store} comments={storeComments} />\n            </div>\n          )\n          }\n          { isNotFound && renderNotFound() }\n          { isLoading && renderLoading() }\n        </div>\n      </Page>\n    );\n  }\n}\n\nStore.propTypes = {\n  store: PropTypes.object.isRequired,\n  storeComments: PropTypes.object,\n};\n\nStore.defaultProps = {\n  storeComments: {},\n};\n\nexport default withRouter(connect(state => state)(Store));\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport Link from 'react-router-dom';\nimport { withCookies } from 'react-cookie';\nimport {\n  addFavList,\n  fetchFavList,\n  restoreUserInfo,\n} from '../actions/index';\nimport Card from './card';\nimport { DOTCH_FOOD_COOKIE_KEY } from '../constants';\n\nclass FavList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderCardList = this.renderCardList.bind(this);\n    this.renderCards = this.renderCards.bind(this);\n    this.renderNoDataHint = this.renderNoDataHint.bind(this);\n  }\n\n  componentDidUpdate(preProps) {\n    const { user: { userInfo: { id: prevUserID }}} = preProps;\n    const { dispatch, user: { userInfo: { id: userID }}} = this.props;\n\n    if (userID && (prevUserID !== userID)) {\n      dispatch(fetchFavList(userID));\n    }\n  }\n\n  renderCards(stores) {\n    const { dispatch, user: { userInfo }} = this.props;\n\n    return _.map(stores, (store) => (\n      <Card\n        addFavList={(args) => {dispatch(addFavList(args))}}\n        key={store.id}\n        store={store}\n        userID={userInfo.id}\n      />\n    ));\n  };\n\n  renderCardList() {\n    const { favList } = this.props;\n\n\n    return (\n      <div className=\"card-list\">\n        {this.renderCards(favList)}\n      </div>\n    );\n  }\n\n  renderNoDataHint() {\n    return (<div>這裡是空的 XDDD</div>);\n  }\n\n  render() {\n    const { favList, user: { isLogin } } = this.props;\n    const isEmptyFavList = !_.size(favList);\n\n    return (\n      <div>\n          {isEmptyFavList && this.renderNoDataHint()}\n          {!isEmptyFavList && isLogin && this.renderCardList(favList)}\n      </div>\n    )\n  }\n}\n\nFavList.propTypes = {\n  favList: PropTypes.object,\n};\n\nFavList.defaultProps = {\n  favList: null,\n};\n\nexport default withCookies(connect(state => state)(FavList));\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport Page from '../components/page';\nimport Card from '../components/card';\nimport FavList from '../components/favlist';\nimport { fetchHotStoreList, addFavList } from '../actions/index';\n\nclass Fav extends Component {\n  constructor(props) {\n    super(props);\n\n    this.renderCards = this.renderCards.bind(this);\n  }\n\n  componentDidMount() {\n    const { dispatch } = this.props;\n\n    dispatch(fetchHotStoreList());\n  }\n\n  renderCards(stores) {\n    const { dispatch, user: { userInfo }} = this.props;\n\n    return _.map(stores, (store) => (\n      <Card\n        addFavList={(args) => {dispatch(addFavList(args))}}\n        key={store.id}\n        store={store}\n        userID={userInfo.id}\n      />\n    ));\n  };\n\n  render() {\n    const { filteredStores } = this.props;\n    const { hotStoresData } = filteredStores;\n\n    return (\n      <Page title=\"首頁\" id=\"index\">\n        <div className=\"panel\">\n          <h1 className=\"panel__main-heading\">我的最愛</h1>\n            <FavList />\n        </div>\n        <div className=\"panel\">\n          <h1 className=\"panel__main-heading\">\n            熱門推薦\n            <span className=\"panel__heading-deco icon-star\" />\n          </h1>\n          <Link\n            to=\"/nearby\"\n            className=\"panel__view-more\"\n            title=\"看更多-熱門推薦\"\n          >\n            看更多\n          </Link>\n          <div className=\"card-list\">\n            {this.renderCards(hotStoresData)}\n          </div>\n        </div>\n      </Page>\n    )\n  }\n}\n\nFav.propTypes = {\n  favList: PropTypes.object,\n  hotStoresData: PropTypes.array,\n};\n\nFav.defaultProps = {\n  favList: null,\n  hotStoresData: [],\n};\n\nexport default connect(state => state)(Fav);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport LazyLoad from 'react-lazyload';\nimport StoreControlButtons from './store_control_button';\nimport { icon as iconData } from '../data/data';\nimport '../styles/components/store_item.scss';\n\nconst StoreItem = ({ store }) => {\n  const boxStyle = {\n    background: '#e8e8e8',\n    width: '175px',\n    height: '175px',\n  };\n\n  return (\n    <div>\n      <div\n        key={store.id}\n        className=\"store-item\"\n      >\n        <div className=\"store-item__image\" style={boxStyle}>\n          <LazyLoad offsetVertical={100} height={175}>\n            <figure>\n              <picture>\n                <source\n                  media=\"all\"\n                  srcSet={`${store.image[5].url} 1x, ${store.image[6].url} 2x`}\n                  type=\"image/webp\"\n                />\n                <source\n                  media=\"all\"\n                  srcSet={`${store.image[1].url} 1x, ${store.image[2].url} 2x`}\n                  type=\"image/jpeg\"\n                />\n                <img src={store.image[1].url} alt={store.name} />\n              </picture>\n              <figcaption className=\"hide\">\n                {store.name}\n              </figcaption>\n            </figure>\n          </LazyLoad>\n        </div>\n        <div className=\"store-item__container\">\n          <h2 className=\"store-item__title\">\n            <Link to={`/store/${store.id}`} title={store.name}>\n              {store.name}\n            </Link>\n          </h2>\n          <div className=\"store-item__description \">\n            {store.description}\n          </div>\n          <ul className=\"store-item__detail\">\n            <li className=\"store-item__detail__item\">\n              <i\n                className=\"store-item__detail__item__icon icon-pin-map\"\n                title={iconData.address}\n              />\n              <a\n                title={iconData.navigation}\n                href={`https://www.google.com.tw/maps/search/${store.location.address}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {store.location.address}\n              </a>\n            </li>\n            <li className=\"store-item__detail__item\">\n              <i\n                className=\"store-item__detail__item__icon icon-phone\"\n                title={iconData.phone}\n              />\n              <a\n                title={iconData.phone}\n                href={`${store.phone}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {store.phone}\n              </a>\n            </li>\n            <li className=\"store-item__detail__item\">\n              <i\n                className=\"store-item__detail__item__icon icon-clock-circular-outline\"\n                title={iconData.openingHour}\n              />\n              {store.openingHour.start}\n              ~\n              {store.openingHour.end}\n            </li>\n            <li className=\"store-item__detail__item\">\n              <i\n                className=\"store-item__detail__item__icon icon-dollar\"\n                title={iconData.price}\n              />\n              {store.price.lowest}\n              ~\n              {store.price.highest}\n            </li>\n            <li className=\"store-item__detail__item\">\n              <i\n                className=\"store-item__detail__item__icon icon-global\"\n                title={iconData.website}\n              />\n              <a\n                title={store.name}\n                href={`${store.sns.website}`}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {store.name}\n              </a>\n            </li>\n          </ul>\n          <div className=\"store-item__tag-list\">\n            {\n              store.tags.map((item) => {\n                return (\n                  <div key={item} className=\"store-item__tag-item\">\n                    <Link\n                      to={`/tag/${item}`}\n                      className=\"store-item__tag-link\"\n                      title={item}\n                    >\n                      {item}\n                    </Link>\n                  </div>\n                );\n              })\n            }\n          </div>\n          <StoreControlButtons store={store} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nStoreItem.propTypes = {\n  store: PropTypes.object.isRequired,\n};\n\nexport default StoreItem;\n","import _ from 'lodash';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport { Link, withRouter } from 'react-router-dom';\nimport Page from '../components/page';\nimport StoreItem from '../components/store_item';\nimport Notfound from '../components/not_found';\n\nimport {\n  fetchStoreList,\n  fetchStoreListByTag,\n} from '../actions/index';\nimport { hotTags } from '../data/data';\n\nconst renderStores = (stores) => {\n  return _.map(stores, (store) => {\n    return (\n      <StoreItem key={store.id} store={store} />\n    );\n  });\n};\n\nconst renderNotFound = () => {\n  return (<Notfound tags={hotTags.slice(0, 3)} />);\n};\n\nconst renderLoading = () => {\n  return (\n    <div className=\"icon-loading store-item__loading\" />\n  );\n};\n\nclass Tag extends Component {\n  componentDidMount() {\n    const { dispatch, router } = this.props;\n    const keyword = this.props.match.params.keyword;\n    keyword ? dispatch(fetchStoreListByTag(keyword)) : dispatch(fetchStoreList());\n  }\n\n  componentDidUpdate(prevProps) {\n    const { dispatch } = this.props;\n    const keyword = this.props.match.params.keyword;\n\n    if (keyword !== prevProps.match.params.keyword) {\n      dispatch(fetchStoreListByTag(keyword));\n    }\n  }\n\n  render() {\n    const { stores } = this.props;\n    const keyword = this.props.match.params.keyword;\n    const isNotFound = _.isArray(stores) && _.isEmpty(stores);\n    const isLoading = _.isObject(stores) && !_.isArray(stores) && _.isEmpty(stores);\n    return (\n      <Page title=\"標籤頁\" id=\"tag\">\n        <div className=\"panel\">\n          { !isNotFound\n            && (\n              <h1 className=\"panel__main-heading mb-2x\">\n                {\n                  keyword\n                }\n              </h1>\n            )\n          }\n          { renderStores(stores) }\n          { isNotFound && renderNotFound() }\n          { isLoading && renderLoading() }\n        </div>\n      </Page>\n    );\n  }\n}\n\n// Tag.propTypes = {\n//   nearbyStoresData: PropTypes.array.isRequired,\n//   recommendStoresData: PropTypes.array.isRequired,\n//   hotStoresData: PropTypes.array.isRequired,\n// };\n\nexport default withRouter(connect(state => state)(Tag));\n","import {\n    DOTCH_FOOD_COOKIE_KEY,\n    LOGIN,\n    LOGOUT,\n    RESTORE_USER_INFO,\n} from '../constants';\n\nconst intialState = {\n  isLogin: false,\n  userInfo: {\n    id: null,\n  },\n}\n\nexport default function (state = intialState, action) {\n  switch (action.type) {\n    case LOGIN:\n      const userInfoString = JSON.stringify(action.payload.userInfo);\n      document.cookie = `${DOTCH_FOOD_COOKIE_KEY}=${userInfoString}; path=/`;\n      return { ...state, isLogin: action.payload.isLogin, userInfo: action.payload.userInfo };\n    case LOGOUT:\n      document.cookie = `${DOTCH_FOOD_COOKIE_KEY}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n      return { ...state, ...intialState };\n    case RESTORE_USER_INFO: // restore user info from cookie\n      return { ...state, isLogin: true, userInfo: action.payload };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport { reducer as FormReducer } from 'redux-form';\nimport StoresReducer from './reducer_stores';\nimport FilteredStoresReducer from './reducer_filtered_stores';\nimport SlidesReducer from './reducer_slideshows';\nimport StoreReducer from './reducer_store';\nimport StoreComments from './reducer_store_comments';\nimport FavList from './favlist';\nimport User from './user';\n\nconst rootReducer = combineReducers({\n  stores: StoresReducer,\n  filteredStores: FilteredStoresReducer,\n  slideshows: SlidesReducer,\n  form: FormReducer,\n  store: StoreReducer,\n  storeComments: StoreComments,\n  favList: FavList,\n  user: User,\n});\n\nexport default rootReducer;\n","import _ from 'lodash';\nimport { FETCH_STORE_LIST, FETCH_STORE_LIST_BY_TAG } from '../constants';\n\nexport default function (state = {}, action) {\n  let storesData = [];\n\n  switch (action.type) {\n    case FETCH_STORE_LIST:\n    case FETCH_STORE_LIST_BY_TAG:\n      action.payload.forEach((doc) => {\n        storesData = [...storesData, doc.data()];\n      });\n\n      storesData.forEach((item) => {\n        if (typeof item.tags === 'object') {\n          item.tags = _.keys(item.tags);\n        }\n      });\n\n      return storesData;\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport {\n  FETCH_NEARBY_STORE_LIST,\n  FETCH_RECOMMEND_STORE_LIST,\n  FETCH_HOT_STORE_LIST,\n} from '../constants';\n\nexport default function (state = {}, action) {\n  let hotStoresData = [];\n  let recommendStoresData = [];\n  let nearbyStoresData = [];\n\n  switch (action.type) {\n    case FETCH_NEARBY_STORE_LIST:\n      _.forEach(action.payload.docs, (doc) => {\n        nearbyStoresData.push(doc.data());\n      });\n\n      _.forEach(nearbyStoresData, (item) => {\n        if (typeof item.tags === 'object') {\n          item.tags = _.keys(item.tags);\n        }\n      });\n\n      return { ...state, nearbyStoresData };\n    case FETCH_RECOMMEND_STORE_LIST:\n      _.forEach(action.payload.docs, (doc) => {\n        recommendStoresData.push(doc.data());\n      });\n\n      _.forEach(recommendStoresData, (item) => {\n        if (typeof item.tags === 'object') {\n          item.tags = _.keys(item.tags);\n        }\n      });\n\n      return { ...state, recommendStoresData };\n    case FETCH_HOT_STORE_LIST:\n      _.forEach(action.payload.docs, (doc) => {\n        hotStoresData.push(doc.data());\n      });\n\n      _.forEach(hotStoresData, (item) => {\n        if (typeof item.tags === 'object') {\n          item.tags = _.keys(item.tags);\n        }\n      });\n\n      return { ...state, hotStoresData };\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport { FETCH_SLIDES_DATA } from '../constants';\n\nexport default function (state = {}, action) {\n  let slidesData = [];\n\n  switch (action.type) {\n    case FETCH_SLIDES_DATA:\n      _.forEach(action.payload.docs, (doc) => {\n        slidesData.push(doc.data());\n      });\n\n      return { ...state, slidesData };\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport { FETCH_STORE_INFO } from '../constants';\n\nexport default function (state = {}, action) {\n  let storeInfo = [];\n\n  switch (action.type) {\n    case FETCH_STORE_INFO:\n      action.payload.forEach((doc) => {\n        storeInfo = [...storeInfo, doc.data()];\n      });\n\n      storeInfo.forEach((item) => {\n        if (typeof item.tags === 'object') {\n          item.tags = _.keys(item.tags);\n        }\n      });\n\n      return storeInfo[0];\n    default:\n      return state;\n  }\n}\n","import { FETCH_STORE_COMMENTS } from '../constants';\n\nexport default function (state = {}, action) {\n  let commentList = [];\n  let id = '';\n\n  switch (action.type) {\n    case FETCH_STORE_COMMENTS:\n      action.payload.forEach((doc) => {\n        id = doc.id;\n        commentList = [...commentList, doc.data()];\n      });\n\n      return {\n        id,\n        commentList,\n      };\n    default:\n      return state;\n  }\n}\n","import _ from 'lodash';\nimport { FETCH_FAV_LIST } from '../constants';\n\nexport default function (state = {}, action) {\n  let favData = [];\n\n  switch (action.type) {\n    case FETCH_FAV_LIST:\n      _.forEach(action.payload.docs, (doc) => {\n        favData.push(doc.data());\n      });\n\n      return { ...favData[0].list };\n    default:\n      return state;\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport {\n  BrowserRouter,\n  Route,\n  Switch,\n} from 'react-router-dom';\nimport promise from 'redux-promise';\nimport { ThemeProvider, CSSReset } from '@chakra-ui/core';\nimport { CookiesProvider } from 'react-cookie';\nimport './styles/index.scss';\nimport Index from './containers/index';\nimport Store from './containers/store';\nimport Fav from './containers/fav';\nimport Tag from './containers/tag';\nimport reducers from './reducers';\n\nconst createStoreWithMiddleware = applyMiddleware(promise)(createStore);\n\nReactDOM.render(\n  <ThemeProvider>\n    <CSSReset />\n      <CookiesProvider>\n        <Provider store={createStoreWithMiddleware(reducers)}>\n          <BrowserRouter>\n            <div>\n              <Switch>\n                <Route path=\"/tag/:keyword\" component={Tag} />\n                <Route path=\"/store/:id\" component={Store} />\n                <Route path=\"/fav/\" component={Fav} />\n                <Route path=\"/\" component={Index} />\n              </Switch>\n            </div>\n          </BrowserRouter>\n        </Provider>\n      </CookiesProvider>\n  </ThemeProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}